!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=227)}([,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(16),r=function(){function t(){this.componentList=new Set,this.subpackageList=new Set,this.collectAfter=new o.default}return t.prototype.initialProperties=function(){},t.prototype.getInitialSubpackages=function(){return[]},t}();e.default=r},,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return jQuery(t)}},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"prototypes",{get:function(){return{projection:this.app.objectContainer.get("Editor/Projection/Prototypes"),panelLayout:this.app.objectContainer.get("Editor/PanelLayout/Prototypes"),panel:this.app.objectContainer.get("Editor/Panel/Prototypes"),component:this.app.objectContainer.get("Editor/Component/Prototypes"),control:this.app.objectContainer.get("Editor/Control/Prototypes"),controlSource:this.app.objectContainer.get("Editor/Control/Source/Prototypes")}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"register",{get:function(){return{panelStructures:this.app.objectContainer.get("Editor/Panel/Structures"),components:this.app.objectContainer.get("Editor/Components"),entityTypes:this.app.objectContainer.get("Entity/Register"),componentPresets:this.app.objectContainer.get("Editor/Component/Presets"),controlRulesOperations:this.app.objectContainer.get("Editor/Control/RulesOperation")}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"builders",{get:function(){return{control:this.app.componentRegister.get("Editor/Builder/Control"),panel:this.app.componentRegister.get("Editor/Builder/Panel"),panelLayout:this.app.componentRegister.get("Editor/Builder/PanelLayout"),projection:this.app.componentRegister.get("Editor/Builder/Projection"),component:this.app.componentRegister.get("Editor/Builder/Component")}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"projectEditorComponent",{get:function(){return this.app.objectContainer.get("Editor/ProjectComponent")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"projectEntity",{get:function(){return this.app.objectContainer.get("Editor/ProjectEntity")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentBuilder",{get:function(){return this.app.objectContainer.get("ComponentBuilder")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"entityCollector",{get:function(){return this.app.componentRegister.get("Entity/Collector")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editorPackage",{get:function(){return this.app.packageRegister.get("Editor/Package")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localizedMessages",{get:function(){return this.app.objectContainer.get("Messages")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panelManager",{get:function(){return this.app.componentRegister.get("Editor/PanelManager")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"projectionManager",{get:function(){return this.app.componentRegister.get("Editor/ProjectionManager")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"templateLoader",{get:function(){return this.app.componentRegister.get("TemplateLoader")},enumerable:!0,configurable:!0}),e}(n(34).default);e.default=r},,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return jQuery.extend(t,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){this.defaultContext=null,this.callbacks=[]}return t.prototype.subscribe=function(t,e){!e&&this.defaultContext&&(e=this.defaultContext),e||(e=t);var n=this,o={callback:t,event:n,unsubscribe:function(){n.unsubscribe(t)}};return this.callbacks.push({callback:t,subscriber:e}),o},t.prototype.unsubscribe=function(t,e){!e&&this.defaultContext&&(e=this.defaultContext),e||(e=t);for(var n=[],o=0;o<this.callbacks.length;o++)this.callbacks[o].callback!==t&&this.callbacks[o].subscriber!==e&&n.push(this.callbacks[o]);this.callbacks=n},t.prototype.trigger=function(t,e){for(var n=0;n<this.callbacks.length;n++)this.callbacks[n].callback.apply(this.callbacks[n].subscriber,[t,e])},t}();e.default=o},,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return jQuery.proxy(t,e)}},,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(98),r=function(){function t(t){this.eventManager=t||new o.default(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.package.app},enumerable:!0,configurable:!0}),t.prototype.initialProperties=function(){},t}();e.default=r},,,function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isAttached=!1,e}return o(e,t),Object.defineProperty(e.prototype,"controlElement",{get:function(){return this.componentElement.find(".control-element")},enumerable:!0,configurable:!0}),e.prototype.attachEvents=function(e){t.prototype.attachEvents.call(this,e),e.addSystemHandler(this.valueChangedEvent,this.onValueChangedEvent),this.isAttached=!0},e.prototype.restoreDefaultOptionValue=function(e){t.prototype.restoreDefaultOptionValue.call(this,e),!this.isAttached&&this.optionValue&&this.setElementValue(this.optionValue)},e.prototype.onValueChangedEvent=function(t){this.setElementValue(t.value)},e.prototype.restoreOptionValue=function(){t.prototype.restoreOptionValue.call(this),this.setElementValue(this.optionValueProp)},e.prototype.updateValueFromElement=function(){this.optionValue=this.getElementValue()},e}(n(56).default);e.default=r},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"titleElement",{get:function(){return this.componentElement.find(".entity-title")},enumerable:!0,configurable:!0}),e.prototype.attachEvents=function(e){t.prototype.attachEvents.call(this,e),this.addElementHandler("click",".actions-wrapper .edit-action",this.onEditClick),this.addElementHandler("click",".actions-wrapper .remove-action",this.onRemoveClick),e.addSystemHandler(this.editorComponent.titleChangedEvent,this.onTitleChanged)},e.prototype.onRemoveClick=function(t){this.projectionManager.removeProjection(this.editorComponent,!0)},e.prototype.onEditClick=function(t){this.panelManager.openPanel(this.editorComponent.entityKey,{},this.editorComponent.entityId)},e.prototype.onTitleChanged=function(t){this.titleElement.html(t.title)},e.prototype.getTemplateContext=function(){return{entity:this.entity}},e}(n(141).default);e.default=r},,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(100),r=n(101),i=function(){function t(t){this.observable=new o.default,t&&(this.container=t)}return t.prototype.has=function(t){return void 0!==r.default(this.container,t)},t.prototype.get=function(t){return r.default(this.container,t)},t.prototype.set=function(t,e){var n=this.has(t)?this.get(t):null;r.default(this.container,t,e),"string"==typeof t&&t.split(".").length&&(t=t.split(".")[0]),this.observable.notify(t,e,n)},t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return JSON.parse(JSON.stringify(t))}},,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return jQuery(t.currentTarget)}},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(76),i=n(16),a=n(75),s=n(67),l=n(68),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.parentControl=null,e.contextControls=new Map,e.valueChangedEvent=new i.default,e}return o(e,t),Object.defineProperty(e.prototype,"panel",{get:function(){return this.panelLayout.panel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controlKey",{get:function(){return this.controlStructure.controlKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controlLabel",{get:function(){return this.controlStructure.controlLabel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"optionKey",{get:function(){return this.controlStructure.optionKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"optionValue",{get:function(){return this.optionValueProp},set:function(t){var e=this.optionValueProp,n=!0;this.optionValueProp=t,typeof e!=typeof t?n=!1:e&&Array.isArray(e)&&!a.default(e,t)?n=!1:!e||Array.isArray(e)||"object"!=typeof e||s.default(e,t)?"object"!=typeof e&&e!=t&&(n=!1):n=!1,n||this.valueChangedEvent.trigger({oldValue:e,value:t,control:this})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isActiveControl",{get:function(){return!this.componentElement.hasClass("control-inactive")},set:function(t){t?(this.componentElement.removeClass("control-inactive"),this.showControlElement()):(this.componentElement.addClass("control-inactive"),this.hideControlElement())},enumerable:!0,configurable:!0}),e.prototype.showControlElement=function(){this.componentElement.slideDown(400)},e.prototype.hideControlElement=function(){this.componentElement.slideUp(400)},e.prototype.getEmptyValue=function(){return null},e.prototype.saveOptionValue=function(){this.controlSource.saveValue()},e.prototype.restoreOptionValue=function(){this.optionValueProp=this.controlSource.getValue()},e.prototype.initialProperties=function(){this.restoreOptionValue(),this.panel.status!=l.default.None&&this.initializeDisplayRules()},e.prototype.attachEvents=function(t){t.addSystemHandler(this.panel.statusChangedEvent,this.onPanelStatusChanged)},e.prototype.restoreDefaultOptionValue=function(t){this.controlStructure.defaultValue&&(t&&void 0==this.optionValue||!t)&&(this.optionValue=this.controlStructure.defaultValue)},e.prototype.initializeDisplayRules=function(){"object"==typeof this.controlStructure.displayRules&&Object.keys(this.controlStructure.displayRules).length?(this.attachObserversAccordingToRules(this.controlStructure.displayRules),this.checkDisplayRules()):this.restoreDefaultOptionValue(!0)},e.prototype.onPanelStatusChanged=function(t){t.status==l.default.Launched&&this.initializeDisplayRules()},e.prototype.attachObserversAccordingToRules=function(t){if(!(t.hasOwnProperty("relation")&&t.length-1==0||!t.hasOwnProperty("relation")&&0===t.length))for(var e in t){var n=t[e];if("relation"!=e)if(n.hasOwnProperty("relation")||!n.hasOwnProperty("optionKey"))this.attachObserversAccordingToRules(n);else{var o=this.getControlByOptionKey(n.optionKey);if(!o)continue;this.eventManager.addSystemHandler(o.valueChangedEvent,this.checkDisplayRules)}}},e.prototype.checkDisplayRules=function(){this.isActiveControl=this.checkRules(this.controlStructure.displayRules),this.isActiveControl&&this.restoreDefaultOptionValue(!0)},e.prototype.checkRules=function(t){var e="AND",n=Object.keys(t).length;if(t.hasOwnProperty("relation")&&(e=t.relation,n--),!n)return!0;for(var o in t)if("relation"!=o){var r=t[o],i=null;if(r.hasOwnProperty("relation")||!r.hasOwnProperty("optionKey"))i=this.checkRules(r);else{var a=this.getControlByOptionKey(r.optionKey);if(!a)continue;var s=a.optionValue,l=r.operation;if(!this.register.controlRulesOperations.has(l))continue;i=this.register.controlRulesOperations.get(l)(s,r)}if("AND"==e&&!i)return!1;if("OR"==e&&i)return!0}return"AND"==e},e.prototype.getControlByOptionKey=function(t){if(this.contextControls.has(t))return this.contextControls.get(t);if(this.parentControl instanceof e)for(var n=this.parentControl,o=null;n;){if((o=n.getControlByOptionKey(t))instanceof e)return o;if(!(n.parentControl instanceof e))break;n=n.parentControl}return this.panelLayout.controls.has(t)?this.panelLayout.controls.get(t):null},e}(r.default);e.default=u},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.createOptionsRepository=function(){return this.editorComponent.options},e}(n(276).default);e.default=r},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(57),i=n(15),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getValidatorOptions=function(){return i.default(t.prototype.getValidatorOptions.call(this),{rules:{entityTitle:{required:!0,minlength:2},optionKey:{required:!0,filterKeyText:!0,filterKeyUniquer:!0,minlength:2},itemsSource:{required:!0},itemsSourceAttribute:{requiredIfActiveControl:!0},itemsSourceCategory:{requiredIfActiveControl:!0},itemsSourceTaxonomy:{requiredIfActiveControl:!0},itemsDisplay:{requiredIfActiveControl:!0},queryType:{requiredIfActiveControl:!0},titleItemReset:{requiredIfActiveControl:!0,minlength:2}}})},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getFilterKeys=function(){return[this.options.get("optionKey")]},e}(n(107).default);e.default=r},,,,,,function(t,e,n){"use strict";var o;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.remove="remove",t.virtual="virtual",t.published="published"}(o||(o={})),e.default=o},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,n){for(var o in e){if(e.hasOwnProperty(o)!==n.hasOwnProperty(o))return!1;var r=typeof e[o];if("object"==r){if(!t(e[o],n[o]))return!1}else if("function"==r){if(void 0===n[o]||e[o].toString()!=n[o].toString())return!1}else if(e[o]!=n[o])return!1}for(var o in n)if(void 0===e[o])return!1;return!0}},function(t,e,n){"use strict";var o;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.Launched=0]="Launched",t[t.Active=1]="Active",t[t.Inactive=2]="Inactive",t[t.Destroyed=3]="Destroyed",t[t.None=4]="None"}(o||(o={})),e.default=o},,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var n="";;){var o=t.getParentEntity();if(!t.rootSelector){if(o){t=o;continue}break}if(n=0==n.length?t.rootSelector:t.rootSelector+" "+n,!o)break;t=o}return e&&(0==n.length?n=e:n+=" "+e),n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){return function(){}}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return Object.getPrototypeOf(t)===Object.getPrototypeOf(e)&&void 0!==t.length&&t.length===e.length&&Array.prototype.every.call(t,function(t,n){return t===e[n]})}},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"prototypes",{get:function(){return{projection:this.app.objectContainer.get("Editor/Projection/Prototypes"),panelLayout:this.app.objectContainer.get("Editor/PanelLayout/Prototypes"),panel:this.app.objectContainer.get("Editor/Panel/Prototypes"),component:this.app.objectContainer.get("Editor/Component/Prototypes"),control:this.app.objectContainer.get("Editor/Control/Prototypes"),controlSource:this.app.objectContainer.get("Editor/Control/Source/Prototypes")}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"register",{get:function(){return{panelStructures:this.app.objectContainer.get("Editor/Panel/Structures"),components:this.app.objectContainer.get("Editor/Components"),entityTypes:this.app.objectContainer.get("Entity/Register"),componentPresets:this.app.objectContainer.get("Editor/Component/Presets"),controlRulesOperations:this.app.objectContainer.get("Editor/Control/RulesOperation")}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"builders",{get:function(){return{control:this.app.componentRegister.get("Editor/Builder/Control"),panel:this.app.componentRegister.get("Editor/Builder/Panel"),panelLayout:this.app.componentRegister.get("Editor/Builder/PanelLayout"),projection:this.app.componentRegister.get("Editor/Builder/Projection"),component:this.app.componentRegister.get("Editor/Builder/Component")}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"projectEditorComponent",{get:function(){return this.app.objectContainer.get("Editor/ProjectComponent")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"projectEntity",{get:function(){return this.app.objectContainer.get("Editor/ProjectEntity")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentBuilder",{get:function(){return this.app.objectContainer.get("ComponentBuilder")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"entityCollector",{get:function(){return this.app.componentRegister.get("Entity/Collector")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editorPackage",{get:function(){return this.app.packageRegister.get("Editor/Package")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localizedMessages",{get:function(){return this.app.objectContainer.get("Messages")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panelManager",{get:function(){return this.app.componentRegister.get("Editor/PanelManager")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"projectionManager",{get:function(){return this.app.componentRegister.get("Editor/ProjectionManager")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"templateLoader",{get:function(){return this.app.componentRegister.get("TemplateLoader")},enumerable:!0,configurable:!0}),e}(n(99).default);e.default=r},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(68);e.default=function(t){return function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.needReloadControl=!1,t}return o(n,e),Object.defineProperty(n.prototype,"controlLoader",{get:function(){return this.app.componentRegister.get("Editor/Control/ControlLoader")},enumerable:!0,configurable:!0}),n.prototype.initialProperties=function(){e.prototype.initialProperties.call(this),this.panel.status!=i.default.None&&this.initializeReloadRules()},n.prototype.checkDisplayRules=function(){e.prototype.checkDisplayRules.call(this),this.needReloadControl&&this.isActiveControl&&(this.controlLoader.reloadControl(this),this.needReloadControl=!1)},n.prototype.onPanelStatusChanged=function(t){e.prototype.onPanelStatusChanged.call(this,t),t.status==i.default.Launched&&this.initializeReloadRules()},n.prototype.initializeReloadRules=function(){var n,o,i=this,a=this.controlStructure;if(a.reloadAfterInit&&(this.checkRules(this.controlStructure.displayRules)?this.controlLoader.reloadControl(this,function(){i.restoreOptionValue()}):this.needReloadControl=!0),a.optionsDepends)try{for(var s=r(a.optionsDepends.values()),l=s.next();!l.done;l=s.next()){var u=l.value,p=this.getControlByOptionKey(u);p&&this.eventManager.addSystemHandler(p.valueChangedEvent,function(){i.checkRules(i.controlStructure.displayRules)?(i.controlLoader.reloadControl(i,function(){"afterReloadDependentOption"in i?i.afterReloadDependentOption():i.optionValue=i.getEmptyValue()}),i.needReloadControl=!1):i.needReloadControl=!0})}}catch(t){n={error:t}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}"initializeReloadRules"in t.prototype&&e.prototype.initializeReloadRules.call(this)},n}(t)}},,,,,,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(8),r=function(){function t(){this.objectContainer=new Map,this.componentRegister=new Map,this.packageRegister=new Map}return Object.defineProperty(t.prototype,"bodyElement",{get:function(){return o.default(document.body)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"windowElement",{get:function(){return o.default(window)},enumerable:!0,configurable:!0}),t.prototype.initialization=function(){},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),r=function(){function t(){}return t.prototype.buildByClass=function(t,e,n){var o=this.createPackageByClass(t,e,n);return this.build(o,e,n)},t.prototype.build=function(t,e,n){return t.app=e,t.parentPackage=n,this.createInteraction(t,e,n),this.afterInteractionBuilding(t,e),this.packageInitialProperties(t),this.packageAttachEvents(t),t.collectAfter.trigger(t),t},t.prototype.packageAttachEvents=function(t){var e=this;t.componentList.forEach(function(t){t.attachEvents(t.eventManager)}),t.subpackageList.forEach(function(t){e.packageAttachEvents(t)})},t.prototype.packageInitialProperties=function(t){var e=this;t.initialProperties(),t.componentList.forEach(function(t){t.initialProperties()}),t.subpackageList.forEach(function(t){e.packageInitialProperties(t)})},t.prototype.createInteraction=function(t,e,n){var r=this,i=t.getInitialSubpackages(),a=t.getInitialComponents();a&&a.forEach(function(e){e.package=t,t.componentList.add(e)}),i&&(i.forEach(function(n){var i=null;n instanceof o.default?((i=n).app=e,i.parentPackage=t):i=r.createPackageByClass(n,t.app,t),t.subpackageList.add(i)}),t.subpackageList.forEach(function(t){r.createInteraction(t,t.app,t.parentPackage)}))},t.prototype.createPackageByClass=function(t,e,n){if(!(t.prototype instanceof o.default))throw new TypeError('Сlass does not implement class "PackageAbstract"');var r=new t;return r.app=e,r.parentPackage=n,r},t.prototype.afterInteractionBuilding=function(t,e){var n=this;t.afterInteractionBuilding&&t.afterInteractionBuilding(e),t.componentList.size&&t.componentList.forEach(function(t){t.afterInteractionBuilding&&t.afterInteractionBuilding(e)}),t.subpackageList.size&&t.subpackageList.forEach(function(t){n.afterInteractionBuilding(t,e)})},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.prototype.build=function(t,e){var n=new t;return e&&this.implementation(n,e),n},t.prototype.implementation=function(t,e){t.package=e,t.initialProperties(),t.attachEvents(t.eventManager)},t}();e.default=o},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(97),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.initialProperties=function(){var t=new Map;this.app.objectContainer.set("Entity/Register",t)},e.prototype.getInitialComponents=function(){return[new i.default]},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(34),i=n(15),a=n(74),s=n(65),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"register",{get:function(){return this.app.objectContainer.get("Entity/Register")},enumerable:!0,configurable:!0}),e.prototype.initialProperties=function(){this.app.componentRegister.set("Entity/Collector",this)},e.prototype.attachEvents=function(t){},e.prototype.collectVirtualEntityByKey=function(t){var e=null;if(!this.register.has(t))throw new Error("Entry by key '"+t+"' in register not found");var n=this.register.get(t);return(e=new a.default).status=s.default.virtual,e.entityId=this.createUniqueID(),e.parentId=0,e.entityKey=n.id,e.order=0,e.options=i.default({},n.defaultOptions),e.title=n.label,e.childEntities=[],e},e.prototype.collectEntityByStructure=function(t){var e=null;if((e=new a.default).status=s.default.published,e.entityId=t.entityId,e.parentId=t.parentId,e.entityKey=t.entityKey,e.order=Number(t.order),e.options=i.default({},t.options),e.title=t.title,e.childEntities=[],t.childEntities&&t.childEntities.hasOwnProperty("length")&&t.childEntities.length)for(var n in t.childEntities){var o=t.childEntities[n],r=this.collectEntityByStructure(o);e.childEntities.push(r)}return e},e.prototype.createUniqueID=function(){var t=function(){return Math.random().toString(16).slice(-4)};return"virtual-"+t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},e}(r.default);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(8),r=n(73),i=n(24),a=function(){function t(t){this.component=t,this.rootElement=o.default(document.documentElement)}return t.prototype.addWindowHandler=function(t,e,n){this.applyElementHandler(!0,{element:o.default(window),event:t,eventSelector:null,eventHandler:e,context:n})},t.prototype.removeWindowHandler=function(t,e,n){this.applyElementHandler(!1,{element:o.default(window),event:t,eventSelector:null,eventHandler:e,context:n})},t.prototype.addSystemHandler=function(t,e,n){n=this.getContext(n),t.subscribe(e,n)},t.prototype.removeSystemHandler=function(t,e,n){n=this.getContext(n),t.unsubscribe(e,n)},t.prototype.addElementHandler=function(t,e,n,o,r){this.applyElementHandler(!0,{element:t,event:e,eventSelector:n,eventHandler:o,context:r})},t.prototype.removeElementHandler=function(t,e,n,o,r){this.applyElementHandler(!1,{element:t,event:e,eventSelector:n,eventHandler:o,context:r})},t.prototype.applyElementHandler=function(t,e){e.context=this.getContext(e.context),e.eventSelector instanceof Function&&!e.eventHandler&&(e.eventHandler=e.eventSelector,e.eventSelector=""),e.context&&(e.eventHandler=i.default(e.eventHandler,e.context)),e.element instanceof Element&&(e.element=jQuery(e.element)),t?e.eventSelector?e.element.on(e.event,e.eventSelector,e.eventHandler):e.element.on(e.event,e.eventHandler):e.eventSelector?e.element.off(e.event,e.eventSelector,e.eventHandler):e.element.off(e.event,e.eventHandler)},t.prototype.getContext=function(t){return!t&&this.component&&(t=this.component),t},t.prototype.addEntityHandler=function(t,e,n,o,a){var s="",l=n;"string"==typeof n&&o instanceof Function&&(s=n,l=o),a||!o||o instanceof Function||(a=o),(a=this.getContext(a))&&(l=i.default(l,a));var u=r.default(t,s);this.rootElement.on(e,u,l)},t.prototype.removeEntityHandler=function(t,e,n,o,a){var s="",l=n;"string"==typeof n&&o instanceof Function&&(s=n,l=o),a||!o||o instanceof Function||(a=o),(a=this.getContext(a))&&(l=i.default(l,a));var u=r.default(t,s);this.rootElement.off(e,u,l)},t.prototype.addComponentHandler=function(t,e,n,o){this.addEntityHandler(this.component,t,e,n,o)},t.prototype.removeComponentHandler=function(t,e,n,o){this.removeEntityHandler(this.component,t,e,n,o)},t.prototype.addPackageHandler=function(t,e,n,o){this.addEntityHandler(this.component.package,t,e,n,o)},t.prototype.removePackageHandler=function(t,e,n,o){this.removeEntityHandler(this.component.package,t,e,n,o)},t.prototype.addPageElementHandler=function(t,e,n,o){this.applyElementHandler(!0,{element:this.rootElement,event:t,eventSelector:e,eventHandler:n,context:o})},t.prototype.removePageElementHandler=function(t,e,n,o){this.applyElementHandler(!1,{element:this.rootElement,event:t,eventSelector:e,eventHandler:n,context:o})},t}();e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var n=t.call(this)||this;return e&&(e instanceof Element&&(e=jQuery(e)),n.componentElement=e),n}return o(e,t),e.prototype.addElementHandler=function(t,e,n,o){this.eventManager.addElementHandler(this.componentElement,t,e,n,o)},e.prototype.removeElementHandler=function(t,e,n,o){this.eventManager.removeElementHandler(this.componentElement,t,e,n,o)},e}(n(34).default);e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(24),r=function(){function t(){this.observers=new Map}return t.prototype.add=function(t,e,n){this.observers.has(t)||this.observers.set(t,[]),e=n?o.default(e,n):e,this.observers.get(t).push(e)},t.prototype.remove=function(t,e,n){this.observers.has(t)&&(e=n||o.default(e,this),this.observers.get(t).filter(function(t){return t!==e}))},t.prototype.notify=function(t,e,n){this.observers.has(t)&&this.observers.get(t).forEach(function(o){o(e,n,t)})},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(43);e.default=function t(e,n,r){if("string"==typeof n)return t(e,n.split("."),r);if(1==n.length&&void 0!==r)return e[n[0]]=r;if(0==n.length)return o.default(e);if(!e.hasOwnProperty(n[0])){if(void 0===r)return;e[n[0]]={}}return t(e[n[0]],n.slice(1),r)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e}},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"panel",{get:function(){return this.control.panel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"optionKey",{get:function(){return this.control.optionKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"optionValue",{get:function(){return this.control.optionValue},enumerable:!0,configurable:!0}),e.prototype.attachEvents=function(t){},e}(n(9).default);e.default=r},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"prototypes",{get:function(){return{projection:this.app.objectContainer.get("Editor/Projection/Prototypes"),panelLayout:this.app.objectContainer.get("Editor/PanelLayout/Prototypes"),panel:this.app.objectContainer.get("Editor/Panel/Prototypes"),component:this.app.objectContainer.get("Editor/Component/Prototypes"),control:this.app.objectContainer.get("Editor/Control/Prototypes"),controlSource:this.app.objectContainer.get("Editor/Control/Source/Prototypes")}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"register",{get:function(){return{panelStructures:this.app.objectContainer.get("Editor/Panel/Structures"),components:this.app.objectContainer.get("Editor/Components"),entityTypes:this.app.objectContainer.get("Entity/Register"),componentPresets:this.app.objectContainer.get("Editor/Component/Presets"),controlRulesOperations:this.app.objectContainer.get("Editor/Control/RulesOperation")}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"builders",{get:function(){return{control:this.app.componentRegister.get("Editor/Builder/Control"),panel:this.app.componentRegister.get("Editor/Builder/Panel"),panelLayout:this.app.componentRegister.get("Editor/Builder/PanelLayout"),projection:this.app.componentRegister.get("Editor/Builder/Projection"),component:this.app.componentRegister.get("Editor/Builder/Component")}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"projectEditorComponent",{get:function(){return this.app.objectContainer.get("Editor/ProjectComponent")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"projectEntity",{get:function(){return this.app.objectContainer.get("Editor/ProjectEntity")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentBuilder",{get:function(){return this.app.objectContainer.get("ComponentBuilder")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"entityCollector",{get:function(){return this.app.componentRegister.get("Entity/Collector")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editorPackage",{get:function(){return this.app.packageRegister.get("Editor/Package")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localizedMessages",{get:function(){return this.app.objectContainer.get("Messages")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panelManager",{get:function(){return this.app.componentRegister.get("Editor/PanelManager")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"projectionManager",{get:function(){return this.app.componentRegister.get("Editor/ProjectionManager")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"templateLoader",{get:function(){return this.app.componentRegister.get("TemplateLoader")},enumerable:!0,configurable:!0}),e}(n(265).default);e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(8);e.default=function(t,e){o.default("html,body").animate({scrollTop:t},e)}},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),i=n(16),a=n(42),s=function(t){function e(){var e=t.call(this)||this;return e.options=new a.default,e.titleChangedEvent=new i.default,e.parentChangedEvent=new i.default,e.statusChangedEvent=new i.default,e.orderChangedEvent=new i.default,e}return o(e,t),Object.defineProperty(e.prototype,"entityId",{get:function(){return this.entity.entityId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"entityKey",{get:function(){return this.entity.entityKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"entityTitle",{get:function(){return this.entity.title},set:function(t){var e=this.entity.title;this.entity.title=t,this.titleChangedEvent.trigger({title:t,oldTitle:e,entity:this.entity,editorComponent:this})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"entityParentId",{get:function(){return this.entity.parentId},set:function(t){var e=this.entity.parentId;this.entity.parentId=t,this.parentChangedEvent.trigger({parent:t,oldParent:e,entity:this.entity,editorComponent:this})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"entityStatus",{get:function(){return this.entity.status},set:function(t){var e=this.entity.status;this.entity.status=t,this.statusChangedEvent.trigger({status:t,oldStatus:e,entity:this.entity,editorComponent:this})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"entityOrder",{get:function(){return this.entity.order},set:function(t){var e=this.entity.order;this.entity.order=t,this.orderChangedEvent.trigger({order:t,oldOrder:e,entity:this.entity,editorComponent:this})},enumerable:!0,configurable:!0}),e.prototype.initialProperties=function(){this.options.container=this.entity.options},e.prototype.attachEvents=function(t){t.addSystemHandler(this.parentChangedEvent,this.moveEntityWhenParentChange)},e.prototype.moveEntityWhenParentChange=function(t){var e=this;if(this.register.components.has(t.oldParent)&&this.register.components.has(t.parent)){var n=this.register.components.get(t.oldParent).entity,o=this.register.components.get(t.parent).entity;n.childEntities=n.childEntities.filter(function(t){return t.entityId!=e.entityId}),o.childEntities.push(this.entity)}},e}(r.default);e.default=s},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.panels=new Set,e.projection=null,e}return o(e,t),e}(n(106).default);e.default=r},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(76),i=n(16),a=function(t){function e(){var e=t.call(this)||this;return e.isControlsSavedProp=!0,e.controls=new Map,e.isControlsSavedChangedEvent=new i.default,e}return o(e,t),Object.defineProperty(e.prototype,"isControlsSaved",{get:function(){return this.isControlsSavedProp},set:function(t){var e=this.isControlsSavedProp;this.isControlsSavedProp=t,e!=t&&this.isControlsSavedChangedEvent.trigger({panelLayout:this,value:t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controlBuilder",{get:function(){return this.app.componentRegister.get("Editor/Control/Builder")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panelAutoSave",{get:function(){return this.panelStructure.panelAutoSave},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panelId",{get:function(){return this.panelStructure.panelId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panelTitle",{get:function(){return this.panelStructure.panelTitle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controlElements",{get:function(){return this.componentElement.find(".control[data-control-type]")},enumerable:!0,configurable:!0}),e.prototype.createControl=function(t){var e=this.builders.control.createControl(t,this),n=this.getControlElement(t.controlKey,t.optionKey);if(!n.length)throw new Error("Element for option '"+t.optionKey+"' not found");return e.componentElement=n,this.componentBuilder.implementation(e.controlSource,this.package),this.componentBuilder.implementation(e,this.package),this.eventManager.addSystemHandler(e.valueChangedEvent,this.onControlValueChanged),this.controls.set(e.optionKey,e),e},e.prototype.getControlElement=function(t,e){return this.controlElements.filter('[data-control-type="'+t+'"][data-option-key="'+e+'"]')},e.prototype.onControlValueChanged=function(t){this.panelAutoSave?(t.control.controlSource.saveValue(),this.isControlsSaved=!0):this.isControlsSaved=!1},e.prototype.attachEvents=function(t){},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.attachEvents=function(e){t.prototype.attachEvents.call(this,e),e.addPageElementHandler("change",".control-element",this.updateValueFromElement)},e.prototype.getEmptyValue=function(){return[]},e.prototype.setElementValue=function(t){(this.controlElement.filter(":checked").prop("checked",!1),"string"==typeof t)&&this.controlElement.filter('[value="'+t+'"]').prop("checked",!0)},e.prototype.getElementValue=function(){var t=this.controlElement.filter(":checked");if(t.length)return t.val()},e}(n(37).default);e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(74);e.default=function t(e,n){if(n.entityId==e)return n;var r=null,i=[];for(var a in n.childEntities)if((s=n.childEntities[a]).childEntities.length&&i.push(s),s.entityId==e){r=s;break}if(null==r)for(var a in i){var s,l=t(e,s=i[a]);if(l instanceof o.default){r=l;break}}return r}},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(76),a=n(16),s=n(24),l=n(42),u=n(68),p=function(t){function e(){var e=t.call(this)||this;return e.optionsContainer={},e.statusProp=u.default.None,e.statusChangedEvent=new a.default,e}return o(e,t),Object.defineProperty(e.prototype,"options",{get:function(){return this.optionsRepository},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.statusProp},set:function(t){var e=this.statusProp;this.statusProp=t,e!=t&&this.statusChangedEvent.trigger({panel:this,oldStatus:e,status:this.statusProp})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isControlsSaved",{get:function(){return this.panelLayout.isControlsSaved},set:function(t){this.panelLayout.isControlsSaved=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formElement",{get:function(){return this.componentElement.find("form.panel-form")},enumerable:!0,configurable:!0}),e.prototype.initialProperties=function(){this.optionsRepository=this.createOptionsRepository()},e.prototype.createOptionsRepository=function(){return new l.default(this.optionsContainer)},e.prototype.attachEvents=function(t){t.addSystemHandler(this.statusChangedEvent,this.onStatusChanged),this.panelLayout.panelAutoSave||(t.addSystemHandler(this.panelLayout.isControlsSavedChangedEvent,this.onIsControlsSavedChanged),this.addElementHandler("click",".panel-navigation .reset-panel-button",this.resetValuesOfControls),this.addElementHandler("click",".panel-navigation .apply-panel-button",this.saveValuesOfControls)),t.addElementHandler(this.formElement,"submit",this.onFormSubmit)},e.prototype.onFormSubmit=function(t){t.preventDefault()},e.prototype.onStatusChanged=function(t){var e=new Map([[u.default.Active,"onActive"],[u.default.Inactive,"onInactive"],[u.default.Launched,"onLaunched"],[u.default.Destroyed,"onDestroyed"]]);if(e.has(t.status)&&e.get(t.status)in t.panel){var n=t.panel[e.get(t.status)];(n=s.default(n,this))()}},e.prototype.onIsControlsSavedChanged=function(){var t=this.componentElement.find(".panel-navigation .reset-panel-button"),e=this.componentElement.find(".panel-navigation .apply-panel-button");this.panelLayout.isControlsSaved?(t.addClass("disabled"),e.addClass("disabled")):(t.removeClass("disabled"),e.removeClass("disabled"))},e.prototype.saveValuesOfControls=function(){var t,e;if(!this.panelLayout.isControlsSaved){try{for(var n=r(this.panelLayout.controls.values()),o=n.next();!o.done;o=n.next()){o.value.saveOptionValue()}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.panelLayout.isControlsSaved=!0}},e.prototype.resetValuesOfControls=function(){var t,e;if(!this.panelLayout.isControlsSaved){try{for(var n=r(this.panelLayout.controls.values()),o=n.next();!o.done;o=n.next()){o.value.restoreOptionValue()}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.panelLayout.isControlsSaved=!0}},e.prototype.getTemplateContext=function(t){return{}},e}(i.default);e.default=p},function(t,e,n){"use strict";var o;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.inside=0]="inside",t[t.outside=1]="outside",t[t.same=2]="same"}(o||(o={})),e.default=o},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(76),i=n(16),a=function(t){function e(){var e=t.call(this)||this;return e.moveProjectionEvent=new i.default,e}return o(e,t),e.prototype.attachEvents=function(t){},e.prototype.initialProjection=function(){},Object.defineProperty(e.prototype,"entity",{get:function(){return this.editorComponent.entity},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"entityOptions",{get:function(){return this.editorComponent.options},enumerable:!0,configurable:!0}),e.prototype.getTemplateContext=function(){return{}},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.panels=new Set,e.projection=null,e}return o(e,t),e}(n(106).default);e.default=r},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.attachEvents=function(e){t.prototype.attachEvents.call(this,e),this.addElementHandler("click",".actions-wrapper.entity-id-"+this.editorComponent.entityId+" .remove-action",this.onRemoveClick),this.addElementHandler("click",".actions-wrapper.entity-id-"+this.editorComponent.entityId+" .edit-action",this.onEditClick)},e.prototype.onRemoveClick=function(t){this.projectionManager.removeProjection(this.editorComponent,!0)},e.prototype.onEditClick=function(t){this.panelManager.openPanel(this.editorComponent.entityKey,{},this.editorComponent.entityId)},e.prototype.getTemplateContext=function(){return{entity:this.entity}},e}(n(305).default);e.default=r},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=new(n(228).default);o.initialization(),window.wcpfAdminApp=o},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(93),i=n(94),a=n(95),s=n(96),l=n(229),u=n(231),p=n(271),c=n(273),f=n(278),d=n(300),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.initialization=function(){var t=new i.default,e=new a.default;this.objectContainer.set("ComponentBuilder",e),t.build(new l.default,this),t.build(new s.default,this),t.build(new u.default,this),t.build(new p.default,this),t.build(new c.default,this),t.build(new f.default,this),t.build(new d.default,this)},e}(r.default);e.default=h},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(230),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getInitialComponents=function(){return[new i.default]},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.initialProperties=function(){this.options={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"},this.app.componentRegister.set("TemplateLoader",this)},e.prototype.attachEvents=function(t){},e.prototype.loadTemplate=function(t,e){return void 0==e&&(e={}),window._.template(t,this.options)(e)},e}(n(34).default);e.default=r},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(16),a=n(232),s=n(233),l=n(234),u=n(237),p=n(238),c=n(254),f=n(260),d=n(264),h=n(268),y=n(269),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.initEditorEvent=new i.default,e.projectLoadedEvent=new i.default,e}return o(e,t),e.prototype.initialProperties=function(){this.app.packageRegister.set("Editor/Package",this),this.app.objectContainer.set("Editor/ProjectEntity",null),this.app.objectContainer.set("Editor/ProjectComponent",null),this.app.objectContainer.set("Editor/Components",new Map)},e.prototype.getInitialSubpackages=function(){return[new a.default,new s.default,new l.default,new u.default,new p.default,new c.default,new f.default]},e.prototype.getInitialComponents=function(){return[new d.default,new y.default,new h.default]},e}(r.default);e.default=v},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.initialProperties=function(){this.app.objectContainer.set("Editor/Component/Prototypes",new Map)},e.prototype.getInitialComponents=function(){return[]},e}(n(1).default);e.default=r},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.initialProperties=function(){this.app.objectContainer.set("Editor/Panel/Prototypes",new Map)},e.prototype.getInitialComponents=function(){return[]},e}(n(1).default);e.default=r},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(235),a=n(236),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.initialProperties=function(){this.app.objectContainer.set("Editor/PanelLayout/Prototypes",new Map([["Tabs",i.default],["List",a.default]])),this.app.objectContainer.set("Editor/Panel/Structures",new Map)},e.prototype.getInitialComponents=function(){return[]},e}(r.default);e.default=s},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(136),a=n(8),s=n(55),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.attachEvents=function(e){t.prototype.attachEvents.call(this,e),e.addElementHandler(this.componentElement,"click",".tabs-heading-wrapper .tab-heading:not(.active-tab)",this.onTabClick),"validate"in this.panel&&this.panel.hasOwnProperty("validateEvent")&&e.addSystemHandler(this.panel.validateEvent,this.onValidatePanel)},e.prototype.onValidatePanel=function(){var t=this;this.componentElement.find(".tab-content").each(function(e,n){var o,i,s=a.default(n),l=s.data("tab-id"),u=t.componentElement.find('.tab-heading[data-tab-id="'+l+'"]'),p=!1;try{for(var c=r(s.find(".error:not(.control-element)")),f=c.next();!f.done;f=c.next()){var d=f.value;if(a.default(d).html().length){p=!0;break}}}catch(t){o={error:t}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(o)throw o.error}}p?u.addClass("exists-errors"):u.removeClass("exists-errors")})},e.prototype.onTabClick=function(t){var e=s.default(t),n=e.data("tab-id");this.componentElement.find(".tab-heading.active-tab,.tab-content.active-tab").removeClass("active-tab"),e.addClass("active-tab"),this.componentElement.find('.tab-content[data-tab-id="'+n+'"]').addClass("active-tab")},e.prototype.assembleControls=function(t){var e=t.tabs;for(var n in e){var o=e[n];if(o.length)for(var r in o){var i=o[r];this.createControl(i)}}},e}(i.default);e.default=l},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.assembleControls=function(t){var e,n,o=t.controls;try{for(var i=r(o),a=i.next();!a.done;a=i.next()){var s=a.value;this.createControl(s)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},e}(n(136).default);e.default=i},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.initialProperties=function(){this.app.objectContainer.set("Editor/Projection/Prototypes",new Map)},e.prototype.getInitialComponents=function(){return[]},e}(n(1).default);e.default=r},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(239),a=n(240),s=n(137),l=n(241),u=n(242),p=n(243),c=n(244),f=n(245),d=n(246),h=n(247),y=n(248),v=n(249),m=n(250),_=n(251),g=n(252),b=n(253),O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.initialProperties=function(){this.app.objectContainer.set("Editor/Control/Prototypes",new Map([["Select",i.default],["Text",a.default],["RadioList",s.default],["TextSize",l.default],["Switch",u.default],["CheckList",p.default],["Repeater",c.default],["ColorPicker",f.default],["Image",d.default],["ColorList",h.default],["RulesBuilder",y.default]])),this.app.objectContainer.set("Editor/Control/Source/Prototypes",new Map([["options",v.default],["entity",m.default],["container",_.default]])),this.app.objectContainer.set("Editor/Control/RulesOperation",new Map)},e.prototype.getInitialComponents=function(){return[new g.default,new b.default]},e}(r.default);e.default=O},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var i=n(77),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.attachEvents=function(e){t.prototype.attachEvents.call(this,e),e.addElementHandler(this.componentElement,"change",".control-element",this.updateValueFromElement)},e.prototype.getEmptyValue=function(){return""},e.prototype.setElementValue=function(t){"string"!=typeof t&&(t=""),this.controlElement.val(t)},e.prototype.getElementValue=function(){return this.controlElement.val()},e.prototype.reloadControl=function(t){var e=t.controlElement.find(".control-element");this.controlElement.html(e.html())},e=r([i.default],e)}(n(37).default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.attachEvents=function(e){t.prototype.attachEvents.call(this,e),e.addElementHandler(this.controlElement,"change paste keyup",this.updateValueFromElement)},e.prototype.getEmptyValue=function(){return""},e.prototype.setElementValue=function(t){"string"!=typeof t&&(t=""),this.controlElement.val(t)},e.prototype.getElementValue=function(){return this.controlElement.val()},e}(n(37).default);e.default=r},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"unitSelectElement",{get:function(){return this.componentElement.find(".select-unit")},enumerable:!0,configurable:!0}),e.prototype.attachEvents=function(e){t.prototype.attachEvents.call(this,e),e.addElementHandler(this.controlElement,"change paste keyup",this.updateValueFromElement),e.addElementHandler(this.unitSelectElement,"change",this.updateValueFromElement)},e.prototype.updateValueFromElement=function(){var e=this.controlElement.val();e=e.replace(/[^0-9\.]/g,""),this.controlElement.val(e),t.prototype.updateValueFromElement.call(this)},e.prototype.setElementValue=function(t){if("number"==typeof t&&(t+=""),"string"==typeof t&&t.length){var e=this.parseUnit(t);"string"!=typeof e[0]&&"number"!=typeof e[0]||isNaN(e[0])||this.controlElement.val(e[0]),this.unitSelectElement.val(e[1])}else this.controlElement.val(""),this.unitSelectElement.val("")},e.prototype.getElementValue=function(){var t=this.controlElement.val(),e=this.unitSelectElement.val();return t.length&&(t=parseFloat(t)),t+e},e.prototype.parseUnit=function(t){return"string"!=typeof t?[0,""]:[parseFloat(t),t.match(/[\d.\-\+]*\s*(.*)/)[1]||""]},e}(n(37).default);e.default=r},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"firstOption",{get:function(){return this.controlStructure.firstOption},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"secondOption",{get:function(){return this.controlStructure.secondOption},enumerable:!0,configurable:!0}),e.prototype.attachEvents=function(e){t.prototype.attachEvents.call(this,e),e.addElementHandler(this.controlElement,"change",this.updateValueFromElement)},e.prototype.setElementValue=function(t){t==this.firstOption.value?this.controlElement.prop("checked",!0):this.controlElement.prop("checked",!1)},e.prototype.getElementValue=function(){return this.controlElement.prop("checked")?this.firstOption.value:this.secondOption.value},e}(n(37).default);e.default=r},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(37),s=n(77),l=n(8),u=n(102),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.attachEvents=function(e){t.prototype.attachEvents.call(this,e),e.addElementHandler(this.componentElement,"change",".control-element",this.updateValueFromElement)},e.prototype.getEmptyValue=function(){return[]},e.prototype.setElementValue=function(t){var e,n;if(void 0==t||null==t?t=[]:"string"==typeof t?t=[t]:Array.isArray(t)||"object"!=typeof t||(t=u.default(t)),this.controlElement.filter(":checked").prop("checked",!1),Array.isArray(t))try{for(var o=i(t.values()),r=o.next();!r.done;r=o.next()){var a=r.value;this.controlElement.filter('[value="'+a+'"]').prop("checked",!0)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}},e.prototype.getElementValue=function(){var t=[];return this.controlElement.filter(":checked").map(function(e,n){var o=l.default(n);t.push(o.val())}),t},e.prototype.reloadControl=function(t){var e=t.controlElement.find(".check-box-list");this.componentElement.find(".check-box-list").html(e.html())},e=r([s.default],e)}(a.default);e.default=p},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a};Object.defineProperty(e,"__esModule",{value:!0});var s=n(56),l=n(77),u=n(68),p=n(137),c=n(8),f=n(102),d=n(43),h=n(75),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.childControls=[],e.reloadControlsQueue=[],e}return o(e,t),Object.defineProperty(e.prototype,"controlLoader",{get:function(){return this.app.componentRegister.get("Editor/Control/ControlLoader")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemsElement",{get:function(){return this.listElement.find("> .repeater-item")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listElement",{get:function(){return this.componentElement.find(".repeater-list:first")},enumerable:!0,configurable:!0}),e.prototype.initialProperties=function(){var e=this;t.prototype.initialProperties.call(this),this.listElement.sortable({items:"> .repeater-item",handle:".sorting-repeater-item-handle",update:function(t,n){e.onItemMove()}})},e.prototype.restoreOptionValue=function(){var t=this.controlSource.getValue();"object"!=typeof t&&(t=[]),this.optionValueProp=t,this.changeValue(t)},e.prototype.initializeReloadRules=function(){var t,e,n=this.controlStructure.itemOptionsDepends,o=[];if(Object.keys(n).length)for(var r in n){var a=n[r];try{for(var s=i(a.values()),l=s.next();!l.done;l=s.next()){var u=l.value;if(-1===o.indexOf(u)){o.push(u);var p=this.getControlByOptionKey(u);p&&this.eventManager.addSystemHandler(p.valueChangedEvent,this.onItemDependChange)}}}catch(e){t={error:e}}finally{try{l&&!l.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}}},e.prototype.attachEvents=function(e){t.prototype.attachEvents.call(this,e),this.panel.hasOwnProperty("afterInitValidationEvent")&&e.addSystemHandler(this.panel.afterInitValidationEvent,this.addRulesToRepeaterItems),e.addElementHandler(this.componentElement,"click",".repeater-bottom-navigation .add-item",this.onAddItemClick),e.addElementHandler(this.componentElement,"click",'.navigation-repeater-item[data-repeater-key="'+this.optionKey+'"] .add-empty-item',this.onAddBeforeItemClick),e.addElementHandler(this.componentElement,"click",'.navigation-repeater-item[data-repeater-key="'+this.optionKey+'"] .remove-item',this.onRemoveItemClick),e.addSystemHandler(this.valueChangedEvent,this.onValueChangedEvent)},e.prototype.onItemMove=function(){var t=this,e=[],n=[];this.itemsElement.each(function(o,r){var i=c.default(r),a=i.attr("data-index");i.hasClass("ui-sortable-placeholder")||(e.push(t.optionValue[a]),n.push(t.childControls[a]))}),this.childControls=n,this.optionValue=d.default(e)},e.prototype.onValueChangedEvent=function(t){this.changeValue(t.value)},e.prototype.onRemoveItemClick=function(t){var e=c.default(t.currentTarget).parents(".repeater-item:first"),n=parseInt(e.attr("data-index")),o=d.default(this.optionValue);e.remove(),this.optionValue.splice(n,1),this.childControls.splice(n,1),this.refreshIndexes(),this.changeEventWithoutProcessing({oldValue:o,newValue:this.optionValue})},e.prototype.onAddBeforeItemClick=function(t){var e=c.default(t.currentTarget).parents(".repeater-item:first"),n=parseInt(e.attr("data-index")),o=d.default(this.optionValue);this.optionValue.splice(n,0,{}),this.childControls.splice(n,0,{}),this.createItem(n,{refreshIndexes:!0}),this.changeEventWithoutProcessing({oldValue:o,newValue:this.optionValue})},e.prototype.onAddItemClick=function(t){this.createItem(-1)},e.prototype.changeValue=function(t){var e,n;if(void 0==t||null==t?t=[]:Array.isArray(t)||"object"!=typeof t||(t=f.default(t),this.optionValueProp=t),Array.isArray(t)){if(t.length<this.childControls.length){for(var o=t.length;o<this.childControls.length;o++){var r=Object.keys(this.childControls[o])[0];this.childControls[o][r].componentElement.parents(".repeater-item:first").remove()}this.childControls.splice(t.length)}this.refreshIndexes();try{for(var s=i(t.entries()),l=s.next();!l.done;l=s.next()){var u=a(l.value,2),p=u[0],c=u[1];if(this.childControls.length-1>=p)for(var d in this.childControls[p]){var h=this.childControls[p][d];c.hasOwnProperty(d)?h.optionValue=c[d]:h.controlStructure.defaultValue?h.optionValue=h.controlStructure.defaultValue:h.optionValue=h.getEmptyValue()}else this.createItem(p,{reloadAfterInit:!1})}}catch(t){e={error:t}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}this.reloadControlsQueue.length&&(this.controlLoader.reloadControls(this.reloadControlsQueue,function(t){var e,n;try{for(var o=i(t),r=o.next();!r.done;r=o.next()){r.value.restoreOptionValue()}}catch(t){e={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}}),this.reloadControlsQueue=[])}},e.prototype.refreshIndexes=function(){var t,e;try{for(var n=i(this.optionValue.entries()),o=n.next();!o.done;o=n.next()){var r=a(o.value,2),s=r[0],l=(r[1],this.itemsElement.eq(s));for(var u in l.attr("data-index",s),l.find('.sorting-repeater-item-handle[data-repeater-key="'+this.optionKey+'"] .index').html(s+1+""),this.childControls[s]){var c=this.childControls[s][u],f=c.optionKey,d=this.optionKey+"."+s+"."+u;c.componentElement.attr("data-option-key",d),c.controlStructure.optionKey=d,c.controlSource.optionKey=s+"."+u,c.componentElement.find('[name="'+f+'"]').attr("name",d),c instanceof p.default&&c.setElementValue(c.optionValue)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}var h=this.panel.formElement.data("validator");if(h&&Object.keys(h.invalid).length)for(var y in h.invalid)this.panel.formElement.find('[id="'+y+'-error"]').remove()},e.prototype.reloadControl=function(t){var e=this.controlStructure.resetValueOnReload;e&&(this.optionValue=[]);var n=t.controlElement.find("> .control-content > .repeater-item-template");this.componentElement.find("> .control-content > .repeater-item-template").html(n.html()),e||this.changeValue(this.optionValue)},e.prototype.renderRepeaterItem=function(t){return'\n            <div class="repeater-item" data-index="'+t+'">\n                <div class="repeater-item-handle sorting-repeater-item-handle" data-repeater-key="'+this.optionKey+'">\n                    <span class="index">'+(t+1)+'</span>\n                </div>\n                <div class="repeater-item-controls"></div>\n                <div class="repeater-item-handle navigation-repeater-item" data-repeater-key="'+this.optionKey+'">\n                    <div class="add-empty-item"></div>\n                    <div class="remove-item"></div>\n                </div>\n            </div>\n        '},e.prototype.addRulesToRepeaterItems=function(){var t=this.panel.formElement.data("validator");if(t){var e=t.settings.rules,n=!1;if(e.hasOwnProperty(this.optionKey))n=e[this.optionKey];else for(var o in e)if(-1===o.indexOf("*")){var r=o.replace(/\./g,"\\.").split("*").join("([a-zA-Z\\d]+)");if(new RegExp(r).test(this.optionKey)){n=e[o];break}}if(n&&"object"==typeof n&&n.hasOwnProperty("repeaterItem")&&"object"==typeof n.repeaterItem)for(var i in this.childControls)for(var a in this.childControls[i]){var s=this.childControls[i][a];n.repeaterItem.hasOwnProperty(a)&&(e[s.optionKey]=n.repeaterItem[a])}}},e.prototype.createItem=function(t,e){e=Object.assign({reloadAfterInit:!0,refreshIndexes:!1},e),-1==t&&(t=this.childControls.length),this.childControls[t]={};var n=new Map,o=this.controlStructure.controlStructures,r=c.default(this.renderRepeaterItem(t)),i=r.find(".repeater-item-controls"),a=this.componentElement.find(".repeater-list > .repeater-item").eq(t);for(var s in t!=this.childControls.length&&a.length?a.before(r):this.componentElement.find(".repeater-list").append(r),e.refreshIndexes&&this.refreshIndexes(),o){var l=Object.assign({},o[s]),p=this.optionKey+"."+t+"."+s,f=l.optionKey;l.optionKey=p,l.controlSource="container";var d=this.builders.control.createControl(l,this.panelLayout),h=this.componentElement.find('.repeater-item-template .control[data-control-type="'+l.controlKey+'"][data-option-key="'+f+'"]');h.length&&(!e.reloadAfterInit&&l.hasOwnProperty("reloadAfterInit")&&l.reloadAfterInit&&(l.reloadAfterInit=!1,this.reloadControlsQueue.push(d)),n.set(this.optionKey+".repeaterItem."+s,d),n.set("repeaterItem."+s,d),d.contextControls=n,(h=h.clone()).attr("data-option-key",p),h.find('[name="'+f+'"]').attr("name",p),d.parentControl=this,d.componentElement=h,d.controlSource.optionsContainer=this.optionValueProp,d.controlSource.optionKey=t+"."+s,i.append(h),this.componentBuilder.implementation(d.controlSource,this.package),this.eventManager.addSystemHandler(d.valueChangedEvent,this.onChildControlValueChanged),this.childControls[t][s]=d)}for(var y in this.childControls[t]){var v=this.childControls[t][y];this.componentBuilder.implementation(v,this.package)}this.panel.status==u.default.Active&&this.addRulesToRepeaterItems()},e.prototype.onChildControlValueChanged=function(t){var e=d.default(this.optionValue),n=t.control.controlSource,o=n.optionsContainer;Array.isArray(e)||(e=f.default(this.optionValue));var r=d.default(e);n.optionsContainer=r,n.saveValue(),this.optionValueProp=r,n.optionsContainer=o,h.default(e,this.optionValue)||this.changeEventWithoutProcessing({oldValue:e,newValue:this.optionValue})},e.prototype.changeEventWithoutProcessing=function(t){this.eventManager.removeSystemHandler(this.valueChangedEvent,this.onValueChangedEvent),this.valueChangedEvent.trigger({oldValue:t.oldValue,value:t.newValue,control:this}),this.eventManager.addSystemHandler(this.valueChangedEvent,this.onValueChangedEvent)},e.prototype.onItemDependChange=function(t){var e,n,o,r,s=this.controlStructure.itemOptionsDepends,l=t.control.optionKey,u=[],p=[];if(Object.keys(s).length)for(var c in s){-1===s[c].indexOf(l)||u.push(c)}try{for(var f=i(u.values()),d=f.next();!d.done;d=f.next()){var h=d.value;try{for(var y=i(this.childControls.entries()),v=y.next();!v.done;v=y.next()){var m=a(v.value,2),_=(m[0],m[1]);_.hasOwnProperty(h)&&p.push(_[h])}}catch(t){o={error:t}}finally{try{v&&!v.done&&(r=y.return)&&r.call(y)}finally{if(o)throw o.error}}}}catch(t){e={error:t}}finally{try{d&&!d.done&&(n=f.return)&&n.call(f)}finally{if(e)throw e.error}}p.length&&this.controlLoader.reloadControls(p,function(t){var e,n;try{for(var o=i(t),r=o.next();!r.done;r=o.next()){var a=r.value;a.optionValue=a.getEmptyValue()}}catch(t){e={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}})},e=r([l.default],e)}(s.default);e.default=y},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.showControlElement=function(){this.componentElement.show()},e.prototype.hideControlElement=function(){this.componentElement.hide()},Object.defineProperty(e.prototype,"colorPickerElement",{get:function(){return this.componentElement.find(".color-picker-element")},enumerable:!0,configurable:!0}),e.prototype.initialProperties=function(){var e=this,n=function(){e.updateValueFromElement()};this.colorPickerElement.wpColorPicker({hide:!0,change:n,clear:n}),t.prototype.initialProperties.call(this)},e.prototype.setElementValue=function(t){"string"!=typeof t&&(t=""),t.length?this.colorPickerElement.wpColorPicker("color",t):this.colorPickerElement.iris("color","")},e.prototype.getElementValue=function(){return this.colorPickerElement.wpColorPicker("color")},e}(n(37).default);e.default=r},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(56),i=n(24),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isAttached=!1,e.attachmentQuery=null,e}return o(e,t),e.prototype.initialProperties=function(){t.prototype.initialProperties.call(this),this.mediaFrame=wp.media({multiple:!1,library:{type:"image"}})},e.prototype.attachEvents=function(e){t.prototype.attachEvents.call(this,e),e.addSystemHandler(this.valueChangedEvent,this.onValueChangedEvent),e.addElementHandler(this.componentElement,"click",".upload-container .upload-image",this.onUpdateButtonClick),e.addElementHandler(this.componentElement,"click",".image-container .delete-image",this.onRemoveButtonClick),this.mediaFrame.on("select",i.default(this.onSelectImage,this))},e.prototype.onRemoveButtonClick=function(){this.optionValue=null},e.prototype.onUpdateButtonClick=function(){this.mediaFrame.open()},e.prototype.onSelectImage=function(){var t=this.mediaFrame.state().get("selection").first().toJSON();this.optionValue=t.id,this.eventManager.removeSystemHandler(this.valueChangedEvent,this.onValueChangedEvent),this.updateOptionValue({id:t.id,url:t.url}),this.eventManager.addSystemHandler(this.valueChangedEvent,this.onValueChangedEvent)},e.prototype.restoreDefaultOptionValue=function(e){t.prototype.restoreDefaultOptionValue.call(this,e),!this.isAttached&&this.optionValue&&this.updateOptionValue({id:this.optionValue})},e.prototype.onValueChangedEvent=function(t){this.updateOptionValue({id:t.value})},e.prototype.restoreOptionValue=function(){t.prototype.restoreOptionValue.call(this),this.updateOptionValue({id:this.optionValueProp})},e.prototype.updateOptionValue=function(t){var e=this,n=t.id,o=this.componentElement.find(".control-input-element"),r=this.componentElement.find(".upload-container"),i=this.componentElement.find(".image-container");if(this.attachmentQuery&&this.attachmentQuery.abort(),!n)return o.val(""),this.updatePreviewImage(""),r.removeClass("hidden"),void i.addClass("hidden");if(r.addClass("hidden"),i.removeClass("hidden"),t.hasOwnProperty("url"))this.updatePreviewImage(t.url);else{var a=wp.media.attachment(n);this.attachmentQuery=a.sync("read"),this.attachmentQuery.done(function(t){e.updatePreviewImage(t.url)}).fail(function(){e.updatePreviewImage("")})}o.val(n)},e.prototype.updatePreviewImage=function(t){this.componentElement.find(".image-element").attr("src",t)},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var i=n(56),a=n(77),s=n(24),l=n(43),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isRestoredOption=!1,e.images={},e.attachmentQuery={},e}return o(e,t),Object.defineProperty(e.prototype,"controlLoader",{get:function(){return this.app.componentRegister.get("Editor/Control/ControlLoader")},enumerable:!0,configurable:!0}),e.prototype.initialProperties=function(){t.prototype.initialProperties.call(this),this.mediaFrame=wp.media({multiple:!1,library:{type:"image"}}),this.mediaFrame.on("select",s.default(this.onSelectImage,this))},e.prototype.getEmptyValue=function(){return{}},e.prototype.restoreOptionValue=function(){t.prototype.restoreOptionValue.call(this);var e=this.controlStructure.taxonomiesColors;if(Array.isArray(this.optionValue)||"object"!=typeof this.optionValue){if(!e.hasOwnProperty(this.optionKey))return void(this.optionValueProp={});this.optionValueProp=l.default(e[this.optionKey])}else if(!Array.isArray(this.optionValue)&&"object"==typeof this.optionValue&&e.hasOwnProperty(this.optionKey)){var n=l.default(e[this.optionKey]);this.optionValueProp=jQuery.extend(n,this.optionValueProp)}for(var o in this.isRestoredOption=!0,this.optionValue){var r=this.optionValue[o],i=this.componentElement.find(".color-item[data-term="+o+"]");r.image&&i.find(".image-element").attr("src")&&(this.images[r.image]=i.find(".image-element").attr("src")),this.changeMarkerStyleSwitch(r.term,r.markerStyle),this.changeTypeSwitch(r.term,r.type),this.changeBorderColorElement(r.term,r.borderColor,!0),this.changeColorElement(r.term,r.color,!0),this.changeImageElement(r.term,r.image)}this.isRestoredOption=!1},e.prototype.onSelectImage=function(){var t=this.mediaFrame.$el.data("term"),e=this.mediaFrame.state().get("selection").first().toJSON();this.images[e.id]=e.url,this.changeImageElement(t,e.id)},e.prototype.changeImageElement=function(t,e){var n=this,o=this.componentElement.find(".color-item[data-term="+t+"]").find(".image-container");if(this.attachmentQuery.hasOwnProperty(t)&&this.attachmentQuery[t]&&this.attachmentQuery[t].abort(),this.changeColorOption(t,"image",e),o.find(".image-element").attr("src",""),e&&!this.images.hasOwnProperty(e)){var r=wp.media.attachment(e);this.attachmentQuery[t]=r.sync("read"),this.attachmentQuery[t].done(function(t){n.images[e]=t.url,o.find(".image-element").attr("src",t.url)}).always(function(){n.updatePreviewColor(t)})}else e&&this.images.hasOwnProperty(e)&&o.find(".image-element").attr("src",this.images[e]);this.updatePreviewColor(t)},e.prototype.changeColorElement=function(t,e,n){void 0===n&&(n=!1);var o=this.componentElement.find(".color-item[data-term="+t+"]"),r=o.find(".color-picker-element"),i=o.find(".preview-color");n&&(r.wpColorPicker("color",e),e&&e.length||r.parents(".wp-picker-container").find(".wp-color-result").css("background-color",""));"color"==this.optionValue[t].type&&i.css("background",e),this.changeColorOption(t,"color",e)},e.prototype.changeBorderColorElement=function(t,e,n){void 0===n&&(n=!1);var o=this.componentElement.find(".color-item[data-term="+t+"]"),r=o.find(".border-picker-element"),i=o.find(".preview-color");n&&(r.wpColorPicker("color",e),e&&e.length||r.parents(".wp-picker-container").find(".wp-color-result").css("background-color",""));i.css("border-color",e),this.changeColorOption(t,"borderColor",e)},e.prototype.changeMarkerStyleSwitch=function(t,e){var n=this.componentElement.find(".color-item[data-term="+t+"]").find('.switch-element[data-name="marker"]');this.changeSwitchElement(n,e),this.changeColorOption(t,"markerStyle",e)},e.prototype.changeTypeSwitch=function(t,e){var n=this.componentElement.find(".color-item[data-term="+t+"]"),o=n.find('.switch-element[data-name="type"]');this.changeSwitchElement(o,e),"color"==e?(n.find(".image-container").hide(),n.find(".color-picker-container").show()):"image"==e&&(n.find(".image-container").show(),n.find(".color-picker-container").hide()),this.changeColorOption(t,"type",e),this.updatePreviewColor(t)},e.prototype.updatePreviewColor=function(t){var e=this.componentElement.find(".color-item[data-term="+t+"]"),n=e.find(".preview-color"),o=this.optionValue[t].image;if("color"==this.optionValue[t].type)n.css("background-image",""),n.css("background",this.optionValue[t].color);else if("image"==this.optionValue[t].type){var r=e.find(".image-container .preview-image-container"),i=e.find(".image-container .upload-container");n.css("background",""),o&&this.images.hasOwnProperty(o)?(n.css("background-image","url("+this.images[o]+")"),r.removeClass("hidden"),i.addClass("hidden")):(n.css("background-image",""),r.addClass("hidden"),i.removeClass("hidden"))}},e.prototype.changeSwitchElement=function(t,e){t.find(".option.active").removeClass("active"),t.find('.option[data-value="'+e+'"]').addClass("active")},e.prototype.reloadControl=function(t){this.componentElement.find(".control-content").html(t.controlElement.find(".control-content").html()),this.initialElementProperties(),this.attachElementEvents(this.eventManager)},e.prototype.afterReloadDependentOption=function(){this.restoreOptionValue()},e.prototype.initialElementProperties=function(){var t=this,e=function(e){setTimeout(function(){var n=jQuery(e.target),o=n.parents(".color-item:first"),r=n.hasClass("wp-picker-clear")?"":n.val();t.changeColorElement(o.data("term"),r)},1)},n=function(e){setTimeout(function(){var n=jQuery(e.target),o=n.parents(".color-item:first"),r=n.hasClass("wp-picker-clear")?"":n.val();t.changeBorderColorElement(o.data("term"),r)},1)};this.componentElement.find(".color-picker-element").wpColorPicker({hide:!0,palettes:!0,change:e,clear:e}),this.componentElement.find(".border-picker-element").wpColorPicker({hide:!0,palettes:!0,change:n,clear:n})},e.prototype.attachEvents=function(e){t.prototype.attachEvents.call(this,e),e.addElementHandler(this.componentElement,"click",".image-container .upload-container .upload-image",this.onUpdateImageClick),e.addElementHandler(this.componentElement,"click",".image-container .delete-image",this.onRemoveImageClick),e.addElementHandler(this.componentElement,"mouseenter",'.switch-element[data-name="marker"] .option',this.onMarkerMouseEnter),e.addElementHandler(this.componentElement,"mouseleave",'.switch-element[data-name="marker"] .option',this.onMouseLeaveEnter)},e.prototype.attachElementEvents=function(t){t.addElementHandler(this.componentElement.find(".switch-element"),"click",".option:not(.active)",this.onSwitchClick)},e.prototype.onMarkerMouseEnter=function(t){var e=jQuery(t.currentTarget);e.parents(".color-item:first").addClass("marker-preview").addClass("marker-preview-"+e.data("value"))},e.prototype.onMouseLeaveEnter=function(t){var e=jQuery(t.currentTarget);e.parents(".color-item:first").removeClass("marker-preview").removeClass("marker-preview-"+e.data("value"))},e.prototype.onRemoveImageClick=function(t){var e=jQuery(t.currentTarget).parents(".color-item:first");this.changeImageElement(e.data("term"),"")},e.prototype.onUpdateImageClick=function(t){var e=jQuery(t.currentTarget).parents(".color-item:first");this.mediaFrame.open(e),this.mediaFrame.$el.data("term",e.data("term"))},e.prototype.onSwitchClick=function(t){var e=jQuery(t.currentTarget),n=e.parents(".color-item:first"),o=e.parents(".switch-element").data("name"),r=e.data("value");"type"==o?this.changeTypeSwitch(n.data("term"),r):"marker"==o&&this.changeMarkerStyleSwitch(n.data("term"),r)},e.prototype.changeColorOption=function(t,e,n){if(this.optionValue[t][e]!=n){var o=l.default(this.optionValue);this.optionValue[t][e]=n,this.isRestoredOption||this.valueChangedEvent.trigger({oldValue:o,value:this.optionValue,control:this})}},e=r([a.default],e)}(i.default);e.default=u},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(56),i=n(43),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isRestoredOption=!1,e}return o(e,t),e.prototype.getEmptyValue=function(){return[]},e.prototype.getGroupPosition=function(t){for(var e in this.optionValue){if(this.optionValue[e].id==t)return e}return-1},e.prototype.getRulePosition=function(t,e){var n=this.getGroupOption(t).rules;for(var o in n){if(n[o].id==e)return o}return-1},e.prototype.getGroupOption=function(t){for(var e in this.optionValue){var n=this.optionValue[e];if(n.id==t)return n}return null},e.prototype.getRuleOption=function(t,e){var n=this.getRulePosition(t,e),o=this.getGroupOption(t);return-1!==n?o.rules[n]:null},e.prototype.setRuleOption=function(t,e,n,o){var r=this.getRulePosition(t,e),i=this.getGroupOption(t);-1!==r?i.rules[r]={id:e,rule:n}:o?i.rules.splice(o,0,{id:e,rule:n}):i.rules.push({id:e,rule:n})},e.prototype.hasRuleOption=function(t,e){var n=this.getGroupOption(t).rules;for(var o in n){if(n[o].id==e)return!0}return!1},e.prototype.hasGroupOption=function(t){for(var e in this.optionValue){if(this.optionValue[e].id==t)return!0}return!1},e.prototype.deleteRuleOption=function(t,e){var n=this.getGroupOption(t),o=this.getRulePosition(t,e);-1!==o&&n.rules.splice(o,1)},e.prototype.deleteGroupOption=function(t){var e=this.getGroupPosition(t);-1!==e&&this.optionValue.splice(e,1)},e.prototype.restoreOptionValue=function(){var e=this;(this.isRestoredOption=!0,t.prototype.restoreOptionValue.call(this),"object"==typeof this.optionValue&&this.optionValue&&this.hasGroupOption("group_0")&&this.hasRuleOption("group_0","rule_0"))||("object"==typeof this.optionValue&&this.optionValue||(this.optionValueProp=[]),this.hasGroupOption("group_0")||this.optionValueProp.push({id:"group_0",rules:[]}),this.getGroupOption("group_0").rules.push({id:"rule_0",rule:{param:this.controlStructure.useEntries[0],operator:"==",value:null}}));var n=null;for(var o in this.optionValue){var r=this.optionValue[o],i=this.getGroupElement(r.id);if(!i.length&&r.rules)this.createEmptyGroup(r.id,n),i=this.getGroupElement(r.id);else if(i.length&&!r.rules){this.deleteGroupOption(r.id);continue}var a=null;for(var s in r.rules){var l=r.rules[s],u=this.getRuleElement(r.id,l.id);u.length||(this.createEmptyRule(r.id,l.id,a),u=this.getRuleElement(r.id,l.id)),this.setRuleOptions(r.id,l.id,l.rule),a=u}n=i}this.componentElement.find(".rule-group[data-id]").each(function(t,n){var o=jQuery(n),r=o.data("id");e.hasGroupOption(r)?o.find(".rule-row[data-id]").each(function(t,n){var o=jQuery(n),i=o.data("id");e.hasRuleOption(r,i)||o.remove()}):o.remove()}),this.initSelect2(),this.isRestoredOption=!1},e.prototype.initSelect2=function(){this.componentElement.find(".value-select").select2({width:"100%",closeOnSelect:!0})},e.prototype.setRuleOptions=function(t,e,n,o){var r=this.getRuleElement(t,e);r.find(".operator-select").val(n.operator),r.find(".param-select").val(n.param);var a=i.default(this.optionValue);this.setRuleOption(t,e,n,o),this.isRestoredOption||this.valueChangedEvent.trigger({oldValue:a,value:this.optionValue,control:this}),this.reloadEntries(t,e)},e.prototype.attachEvents=function(e){t.prototype.attachEvents.call(this,e),e.addElementHandler(this.componentElement,"change",".rule-row .param-select",this.onParamChange),e.addElementHandler(this.componentElement,"change",".rule-row .operator-select",this.onOperatorChange),e.addElementHandler(this.componentElement,"change",".rule-row .value-select",this.onEntryValueChange),e.addElementHandler(this.componentElement,"click",".rule-row .add-rule.button",this.onAddRuleButtonClick),e.addElementHandler(this.componentElement,"click",".rule-row .remove-rule.button",this.onRemoveRuleButtonClick),e.addElementHandler(this.componentElement,"click",".rule-groups .add-rule-group.button",this.onAddGroupButtonClick)},e.prototype.compileTemplate=function(t,e){return window._.template(t,{evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"})(e)},e.prototype.getRuleElement=function(t,e){return this.componentElement.find('.rule-group[data-id="'+t+'"] .rule-row[data-id="'+e+'"]')},e.prototype.getGroupElement=function(t){return this.componentElement.find('.rule-group[data-id="'+t+'"]')},e.prototype.generateUniqueId=function(){return"_"+Math.random().toString(36).substr(2,9)},e.prototype.onRemoveRuleButtonClick=function(t){var e=jQuery(t.currentTarget).parents(".rule-row:first"),n=e.data("id"),o=e.parents(".rule-group:first").data("id"),r=e.parents(".rules-table-body"),a=i.default(this.optionValue);"rule_0"==n&&"group_0"==o||(r.find(".rule-row").length<=1&&"group_0"!=o?(this.getGroupElement(o).remove(),this.deleteGroupOption(o)):(e.remove(),this.deleteRuleOption(o,n)),this.valueChangedEvent.trigger({oldValue:a,value:this.optionValue,control:this}))},e.prototype.onAddGroupButtonClick=function(t){var e=this.generateUniqueId(),n=this.compileTemplate(this.controlStructure.groupRuleTemplateHtml,{groupId:e}),o=jQuery(n),r=this.generateUniqueId();this.componentElement.find(".rule-group").length?o.insertAfter(this.componentElement.find(".rule-group:last")):this.componentElement.find(".rule-groups").prepend(o);var i={param:this.controlStructure.useEntries[0],operator:"==",value:null};this.optionValue.push({id:e,rules:[]}),this.createEmptyRule(e,r),this.setRuleOptions(e,r,i)},e.prototype.createEmptyGroup=function(t,e){var n=this.compileTemplate(this.controlStructure.groupRuleTemplateHtml,{groupId:t}),o=jQuery(n);e?o.insertAfter(e):this.componentElement.find(".rule-group").length?o.insertAfter(this.componentElement.find(".rule-group:last")):this.componentElement.find(".rule-groups").prepend(o)},e.prototype.createEmptyRule=function(t,e,n){var o=this.compileTemplate(this.controlStructure.ruleTemplateHtml,{groupId:t,ruleId:e}),r=jQuery(o);n?r.insertAfter(n):this.getGroupElement(t).find(".rules-table-body").append(r),this.initSelect2()},e.prototype.onAddRuleButtonClick=function(t){var e=jQuery(t.currentTarget),n=e.parents(".rule-row:first").data("id"),o=e.parents(".rule-group:first").data("id"),r=this.getRuleElement(o,n),i=this.generateUniqueId();this.createEmptyRule(o,i,r);var a=this.getGroupOption(o),s=this.getRulePosition(o,n),l={param:this.controlStructure.useEntries[0],operator:"==",value:null};a.rules.splice(s+1,0,{id:i,rule:l}),this.setRuleOptions(o,i,l,s+1)},e.prototype.onEntryValueChange=function(t){var e=jQuery(t.currentTarget),n=e.parents(".rule-row:first").data("id"),o=e.parents(".rule-group:first").data("id"),r=e.val();this.changeRuleOption(o,n,"value",r)},e.prototype.onOperatorChange=function(t){var e=jQuery(t.currentTarget),n=e.parents(".rule-row:first").data("id"),o=e.parents(".rule-group:first").data("id"),r=e.val();this.changeRuleOption(o,n,"operator",r)},e.prototype.onParamChange=function(t){var e=jQuery(t.currentTarget),n=e.parents(".rule-row:first").data("id"),o=e.parents(".rule-group:first").data("id"),r=e.val();this.changeRuleOption(o,n,"param",r),this.reloadEntries(o,n)},e.prototype.reloadEntries=function(t,n){var o=this,r=this.getRuleOption(t,n).rule.param,i=this.getValueElementByRule(t,n);i.data("wcpf-loaded-options",!1),i.parents("td:first").block(),e.optionsElements.hasOwnProperty(r)?this.updateElementsWithParams(r):(!e.optionsQueries.hasOwnProperty(r)||4==e.optionsQueries[r].readyState&&200!=e.optionsQueries[r].status)&&(e.optionsQueries[r]=wp.ajax.send("wcpf_editor_rules_builder_get_options",{type:"POST",dataType:"json",data:{param:r}}).done(function(t){t&&t.hasOwnProperty("optionsHtml")?(e.optionsElements[r]=jQuery(t.optionsHtml),o.updateElementsWithParams(r)):e.optionsQueries.hasOwnProperty(r)&&delete e.optionsQueries[r]}))},e.prototype.updateElementsWithParams=function(t){if("object"==typeof this.optionValue&&this.optionValue)for(var n in this.optionValue){var o=this.optionValue[n];for(var r in o.rules){var i=o.rules[r];if(i.rule.param==t){var a=this.getValueElementByRule(o.id,i.id);a.data("wcpf-loaded-options")||(a.html(e.optionsElements[t].html()),a.data("wcpf-loaded-options",!0),a.parents("td:first").unblock()),this.isRestoredOption=!0,a.val(i.rule.value),a.trigger("change"),this.isRestoredOption=!1}}}},e.prototype.getValueElementByRule=function(t,e){return this.componentElement.find('.rule-group[data-id="'+t+'"] .rule-row[data-id="'+e+'"] .value-select')},e.prototype.changeRuleOption=function(t,e,n,o){this.optionValue&&"object"==typeof this.optionValue||(this.optionValueProp=[]);var r=this.getRuleOption(t,e);if(!r||r.rule[n]!=o){var a=i.default(this.optionValue);r.rule[n]=o,this.isRestoredOption||this.valueChangedEvent.trigger({oldValue:a,value:this.optionValue,control:this})}},e.optionsElements={},e.optionsQueries={},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(103),i=n(43),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.saveValue=function(){var t=this.optionValue;"object"==typeof t&&(t=i.default(t)),this.panel.options.set(this.optionKey,t)},e.prototype.getValue=function(){var t=this.panel.options.has(this.optionKey)?i.default(this.panel.options.get(this.optionKey)):void 0;return"object"==typeof t&&(t=i.default(t)),t},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.saveValue=function(){if(this.panel.hasOwnProperty("editorComponent")){var t=this.panel.editorComponent;(t.hasOwnProperty(this.optionKey)||this.optionKey in t)&&(t[this.optionKey]=this.optionValue)}},e.prototype.getValue=function(){if(this.panel.hasOwnProperty("editorComponent")){var t=this.panel.editorComponent;if(t.hasOwnProperty(this.optionKey)||this.optionKey in t)return t[this.optionKey]}},e}(n(103).default);e.default=r},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(103),i=n(42),a=function(t){function e(e){var n=t.call(this)||this;return n.optionKeyProp=null,n.optionsRepository=new i.default,e&&(n.optionsRepository.container=e),n}return o(e,t),Object.defineProperty(e.prototype,"optionsContainer",{get:function(){return this.optionsRepository.container},set:function(t){this.optionsRepository.container=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"optionKey",{get:function(){return this.optionKeyProp?this.optionKeyProp:this.control.optionKey},set:function(t){this.optionKeyProp=t},enumerable:!0,configurable:!0}),e.prototype.saveValue=function(){this.optionsRepository.set(this.optionKey,this.optionValue)},e.prototype.getValue=function(){return this.optionsRepository.has(this.optionKey)?this.optionsRepository.get(this.optionKey):void 0},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),i=n(67),a=n(15),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.attachEvents=function(t){t.addSystemHandler(this.editorPackage.initEditorEvent,this.initEditor)},e.prototype.initEditor=function(t){var e=this.register.controlRulesOperations;e.set("==",this.isEqualToOperator),e.set("!=",this.isNotEqualToOperator),e.set(">",this.greaterThanOperator),e.set("<",this.lessThanOperator),e.set(">=",this.greaterThanOrEqualToOperator),e.set("<=",this.lessThanOrEqualToOperator),e.set("in",this.inOperator),e.set("inControl",this.inControlOperator),e.set("notIn",this.notInOperator),e.set("notInControl",this.notInControlOperator)},e.prototype.isEqualToOperator=function(t,e){return Array.isArray(t)?(t=a.default({},t),i.default(t,e.value)):t==e.value},e.prototype.isNotEqualToOperator=function(t,e){return!this.isEqualToOperator(t,e)},e.prototype.greaterThanOperator=function(t,e){return t>e.value},e.prototype.lessThanOperator=function(t,e){return!this.greaterThanOperator(t,e)},e.prototype.greaterThanOrEqualToOperator=function(t,e){return t>=e.value},e.prototype.lessThanOrEqualToOperator=function(t,e){return t<=e.value},e.prototype.inOperator=function(t,e){return-1!==e.value.indexOf(t)},e.prototype.inControlOperator=function(t,e){return Array.isArray(t)?-1!==t.indexOf(e.value):"object"==typeof t&&"hasOwnProperty"in t&&t.hasOwnProperty(e.value)},e.prototype.notInOperator=function(t,e){return!this.inOperator(t,e)},e.prototype.notInControlOperator=function(t,e){return!this.inControlOperator(t,e)},e}(r.default);e.default=s},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a};Object.defineProperty(e,"__esModule",{value:!0});var a=n(9),s=n(56),l=n(42),u=n(8),p=function(t){function e(){var e=t.call(this)||this;return e.controlRequests=new Map,e}return o(e,t),e.prototype.initialProperties=function(){this.app.componentRegister.set("Editor/Control/ControlLoader",this)},e.prototype.attachEvents=function(t){},e.prototype.reloadControls=function(t,e){var n,o,i=[];try{for(var a=r(t.values()),s=a.next();!s.done;s=a.next()){var l=s.value;i.push(this.collectControlProps(l))}}catch(t){n={error:t}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}this.reloadRequest(i,t,e)},e.prototype.reloadControl=function(t,e){this.reloadRequest([this.collectControlProps(t)],[t],e)},e.prototype.collectControlProps=function(t){var e,n,o,a,u,p,c=new l.default({});try{for(var f=r(t.panelLayout.controls.values()),d=f.next();!d.done;d=f.next()){var h=d.value;c.set(h.optionKey,h.optionValue)}}catch(t){e={error:t}}finally{try{d&&!d.done&&(n=f.return)&&n.call(f)}finally{if(e)throw e.error}}var y={},v={},m=[t],_=[],g=t.parentControl,b={};for(t.panel.hasOwnProperty("editorComponent")&&(b=t.panel.editorComponent.entity);g instanceof s.default;)m.push(g),g=g.parentControl;m.reverse();try{for(var O=r(m.values()),P=O.next();!P.done;P=O.next()){h=P.value;_.push(h.optionKey);try{for(var E=r(h.contextControls.entries()),j=E.next();!j.done;j=E.next()){var C=i(j.value,2),w=C[0],S=C[1];v[w]=S.optionValue}}catch(t){u={error:t}}finally{try{j&&!j.done&&(p=E.return)&&p.call(E)}finally{if(u)throw u.error}}y[h.optionKey]=Object.assign({},v)}}catch(t){o={error:t}}finally{try{P&&!P.done&&(a=O.return)&&a.call(O)}finally{if(o)throw o.error}}return{options:c.container,context:v,optionKey:t.optionKey,panelKey:t.panel.panelKey,controlPath:_,parentsContext:y,entity:b}},e.prototype.reloadRequest=function(t,e,n){var o,a,s,l;try{for(var p=r(e.values()),c=p.next();!c.done;c=p.next()){var f=c.value;this.controlRequests.has(f)&&this.controlRequests.get(f).abort(),f.componentElement.block()}}catch(t){o={error:t}}finally{try{c&&!c.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}var d=wp.ajax.send("wcpf_editor_control_reload",{type:"POST",dataType:"json",data:{controls:JSON.stringify(t)}}).done(function(t){var o,a;if(t.items&&Array.isArray(t.items)){try{for(var s=r(t.items.entries()),l=s.next();!l.done;l=s.next()){var p=i(l.value,2),c=p[0],f=p[1];if("object"==typeof f){var d=e[c],h={prevStructure:d.controlStructure,structure:f.structure,controlHtml:f.controlHtml,controlElement:u.default(f.controlHtml)};d.controlStructure=f.structure,"reloadControl"in d&&d.reloadControl(h)}}}catch(t){o={error:t}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}n&&n(e)}}).always(function(){var t,n;try{for(var o=r(e.values()),i=o.next();!i.done;i=o.next()){i.value.componentElement.unblock()}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}});try{for(var h=r(e.values()),y=h.next();!y.done;y=h.next()){f=y.value;this.controlRequests.set(f,d)}}catch(t){s={error:t}}finally{try{y&&!y.done&&(l=h.return)&&l.call(h)}finally{if(s)throw s.error}}},e}(a.default);e.default=p},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(255),a=n(256),s=n(257),l=n(258),u=n(259),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getInitialComponents=function(){return[new i.default,new a.default,new s.default,new l.default,new u.default]},e}(r.default);e.default=p},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.initialProperties=function(){this.app.componentRegister.set("Editor/Builder/Control",this)},e.prototype.attachEvents=function(t){},e.prototype.createControl=function(t,e){if(!this.prototypes.control.has(t.controlKey))throw new Error("Control class not found by type '"+t.controlKey+"'");var n=this.prototypes.control.get(t.controlKey),o=this.componentBuilder.build(n);if(!this.prototypes.controlSource.has(t.controlSource))throw new Error("Control source by key '"+t.controlSource+"' not found");var r=this.prototypes.controlSource.get(t.controlSource),i=this.componentBuilder.build(r);return i.control=o,o.controlSource=i,e&&(o.panelLayout=e),o.controlStructure=t,o},e}(n(9).default);e.default=r},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.initialProperties=function(){this.app.componentRegister.set("Editor/Builder/Panel",this)},e.prototype.attachEvents=function(t){},e.prototype.createPanel=function(t,e,n){if(!this.prototypes.panel.has(t))throw new Error("Panel controller with id '"+t+"' not found");if(n&&!this.register.components.has(n))throw new Error("Editor element with id '"+n+"' not found");var o=this.prototypes.panel.get(t),r=this.componentBuilder.build(o);if(r.panelKey=t,r.panelContext=e,!n&&r.hasOwnProperty("editorComponent"))throw new Error("For controller of '"+t+"' panel, need entity");if(n){var i=this.register.components.get(n);r.editorComponent=i,i.hasOwnProperty("panels")&&i.panels.add(r)}return r},e}(n(9).default);e.default=r},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.initialProperties=function(){this.app.componentRegister.set("Editor/Builder/PanelLayout",this)},e.prototype.attachEvents=function(t){},e.prototype.createPanelLayout=function(t){if(!this.register.panelStructures.has(t))throw new Error("Panel structure with id '"+t+"' not found");var e=this.register.panelStructures.get(t),n=this.prototypes.panelLayout.get(e.panelLayoutKey),o=this.componentBuilder.build(n);return o.panelStructure=e,o},e}(n(9).default);e.default=r},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),i=n(138),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.initialProperties=function(){this.app.componentRegister.set("Editor/Builder/Projection",this)},e.prototype.attachEvents=function(t){},e.prototype.createProjectionByEntityId=function(t){var e=i.default(t,this.projectEntity);if(null==e)throw new Error("Entity by id '"+t+"' not found");return this.createProjectionByEntity(e)},e.prototype.createProjectionByEntity=function(t){if(!this.register.components.has(t.entityId))throw new Error("Element by entity id '"+t.entityId+"' not found");return this.createProjectionByComponent(this.register.components.get(t.entityId))},e.prototype.createProjectionByComponent=function(t){return this.createProjectionByKey(t.entityKey,t)},e.prototype.createProjectionByKey=function(t,e){if(!e.hasOwnProperty("projection"))throw new Error("Element '#"+e.entityId+" - "+e.entityTitle+"' does not have projection support");if(!this.prototypes.projection.has(t))throw new Error("Projection controller prototype by key '"+t+"' not found");var n=this.prototypes.projection.get(t),o=this.componentBuilder.build(n);return e&&(o.editorComponent=e,e.projection=o),o.projectionKey=t,o.package=this.package,o},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),i=n(138),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.initialProperties=function(){this.app.componentRegister.set("Editor/Builder/Component",this)},e.prototype.attachEvents=function(t){},e.prototype.createComponentByEntityId=function(t){var e=i.default(t,this.projectEntity);if(null==e)throw new Error("Entity by id '"+t+"' not found");return this.createComponentByEntity(e)},e.prototype.createComponentByEntity=function(t){if(!this.prototypes.component.has(t.entityKey))throw new Error("Element prototype by entity key '"+t.entityKey+"' not found");this.isNumeric(t.entityId)&&(t.entityId=parseFloat(t.entityId)),this.isNumeric(t.parentId)&&(t.parentId=parseFloat(t.parentId));var e=this.prototypes.component.get(t.entityKey),n=this.componentBuilder.build(e);if(n.entity=t,this.register.components.set(t.entityId,n),this.componentBuilder.implementation(n,this.package),t.childEntities.length)for(var o in t.childEntities){var r=t.childEntities[o];this.createComponentByEntity(r)}return n},e.prototype.isNumeric=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(261),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getInitialComponents=function(){return[new i.default]},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),i=n(262),a=n(263),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.attachEvents=function(t){t.addSystemHandler(this.editorPackage.initEditorEvent,this.initEditor)},e.prototype.initEditor=function(t){t.panel.set("AddElement",i.default),t.control.set("ElementList",a.default)},e}(r.default);e.default=s},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(139),i=n(15),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.attachEvents=function(e){t.prototype.attachEvents.call(this,e),this.options.observable.add("field",this.onElementSelect,this),this.options.observable.add("preset",this.onElementSelect,this),this.options.observable.add("layout",this.onElementSelect,this)},e.prototype.onElementSelect=function(t){var e=t.elementCode,n=t.defaultState;if(this.register.entityTypes.has(e)){var o=this.entityCollector.collectVirtualEntityByKey(e);"object"==typeof n&&(o=i.default(o,n)),o.parentId=this.projectEntity.entityId,this.projectEntity.childEntities.push(o);var r=this.builders.component.createComponentByEntity(o);r.hasOwnProperty("projection")&&this.projectionManager.addProjection(r),this.prototypes.panel.has(o.entityKey)?this.panelManager.openPanel(o.entityKey,o.entityId):(this.panelManager.backPanel(),r.hasOwnProperty("projection")&&this.projectionManager.scrollToProjection(r))}},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(37),i=n(55),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.attachEvents=function(t){t.addElementHandler(this.componentElement,"click",".element-item[data-element-code]",this.onItemClick)},e.prototype.onItemClick=function(t){var e=i.default(t);this.setElementValue({elementCode:e.data("element-code"),defaultState:e.data("default-state")}),this.updateValueFromElement()},e.prototype.setElementValue=function(t){(this.componentElement.find(".element-item[data-element-code].selected").removeClass("selected"),"object"==typeof t)&&this.componentElement.find('.element-item[data-element-code="'+t.elementCode+'"]').addClass("selected")},e.prototype.getElementValue=function(){var t=this.componentElement.find(".element-item[data-element-code].selected");return t.length?{elementCode:t.data("element-code"),defaultState:t.data("default-state")}:null},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(104),a=n(105),s=n(55),l=n(65),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rootSelector=".woocommerce-product-filter-manage-project-wrapper",e.rowModeWidth=1140,e}return o(e,t),e.prototype.initialProperties=function(){jQuery.hasOwnProperty("blockUI")&&(jQuery.blockUI.defaults.message=null)},e.prototype.attachEvents=function(t){t.addWindowHandler("load",this.onWindowLoaded),t.addComponentHandler("click",".editor-panel .navigation .save-project",this.saveProject),t.addComponentHandler("click",".editor-panel .navigation .add-element",this.onAddElementClick),t.addComponentHandler("click",".panel.projections-panel .view-mode-toggle .view-mode",this.onViewModeClick),t.addWindowHandler("resize",this.onWindowResize)},e.prototype.onViewModeClick=function(t){var e=s.default(t).data("mode");this.setMode(e)},e.prototype.setMode=function(t){this.rootElement.find(".panel.editor-panel").attr("data-panel-mode",t),this.rootElement.find(".panel.projections-panel .view-mode-toggle .view-mode.active").removeClass("active"),this.rootElement.find('.panel.projections-panel .view-mode-toggle .view-mode[data-mode="'+t+'"]').addClass("active")},e.prototype.getMode=function(){var t=this.rootElement.find(".panel.editor-panel").attr("data-panel-mode");return t||(window.innerWidth<this.rowModeWidth?"row":"column")},e.prototype.onWindowResize=function(t){window.innerWidth<this.rowModeWidth&&this.setMode("row")},e.prototype.onWindowLoaded=function(t){if(window.hasOwnProperty("ProductFilterData")){window.innerWidth<this.rowModeWidth?this.setMode("row"):this.setMode("column");var e=window.ProductFilterData,n=(this.builders.component,null);if("edit"==e.pageAction||"new"==e.pageAction){for(var o in this.app.objectContainer.set("PageLinks",{listProject:e.pageLinks.list_project,newProject:e.pageLinks.new_project,editProject:e.pageLinks.edit_project}),this.app.objectContainer.set("Messages",e.messages),e.editor.panels){var r=e.editor.panels[o];this.register.panelStructures.set(o,r)}for(var i in e.registerEntities){var a=e.registerEntities[i];this.register.entityTypes.set(i,{id:a.id,label:a.label,isGrouped:a.is_grouped,defaultOptions:a.default_options})}if(this.editorPackage.initEditorEvent.trigger(this.prototypes),window.hasOwnProperty("ProductFilterProjectData")){var s=window.ProductFilterProjectData;n=this.entityCollector.collectEntityByStructure(s)}else n=this.entityCollector.collectVirtualEntityByKey("Project");"new"==e.pageAction&&e.postId&&(n.entityId=e.postId,n.status=l.default.published);var u=this.builders.component.createComponentByEntity(n);if(this.app.objectContainer.set("Editor/ProjectEntity",n),this.app.objectContainer.set("Editor/ProjectComponent",u),this.editorPackage.projectLoadedEvent.trigger(this.register),this.panelManager.openPanel(n.entityKey,n.entityId),this.panelManager.activePanels.length){var p=this.panelManager.activePanels[0];this.panelManager.checkCorrectnessOfOptions(p)}"new"==e.pageAction&&u.titleChangedEvent.trigger({title:u.entityTitle,oldTitle:u.entityTitle,entity:u.entity,editorComponent:u})}}},e.prototype.saveProject=function(){var t,e,n=this,o=this.app.bodyElement.find("#wpcontent"),i=this.panelManager.activePanels,s=this.app.bodyElement.find(".wcpf-notices-container");if(i.length)try{for(var l=r(i),u=l.next();!u.done;u=l.next()){var p=u.value;if(!this.panelManager.checkCorrectnessOfOptions(p))return;if(this.panelManager.modalToSaveOptions(p),!this.panelManager.checkCorrectnessOfOptions(p))return}}catch(e){t={error:e}}finally{try{u&&!u.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}o.block(),wp.ajax.send("wcpf_save_project",{type:"POST",dataType:"json",data:{projectEntity:JSON.stringify(this.projectEntity)}}).fail(function(t){var e,o;if(s.html(""),t.hasOwnProperty("messages")&&t.messages.length){try{for(var i=r(t.messages),l=i.next();!l.done;l=i.next()){var u=l.value;s.append(n.getMessageTemplate(u))}}catch(t){e={error:t}}finally{try{l&&!l.done&&(o=i.return)&&o.call(i)}finally{if(e)throw e.error}}a.default(s.offset().top-window.innerHeight/2,400)}}).done(function(t){if(s.html(""),t.hasOwnProperty("projectId")){var e=n.app.objectContainer.get("PageLinks").editProject;e=e.replace(/\%project_id\%/g,t.projectId),location.href=e}}).always(function(){o.unblock()})},e.prototype.onAddElementClick=function(){this.panelManager.openPanel("AddElement")},e.prototype.getMessageTemplate=function(t){return'<div class="'+t.level+" "+t.level+'-level-message">\n                <p class="text">'+t.text+"</p>\n            </div>"},e}(i.default);e.default=u},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(34),i=n(266),a=n(267),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rootSelector="",e}return o(e,t),Object.defineProperty(e.prototype,"rootElement",{get:function(){return a.default(this)},enumerable:!0,configurable:!0}),e.prototype.getParentEntity=function(){return i.default(this.package,"rootSelector")?this.package:null},e.prototype.getEntityElement=function(t){return a.default(this,t)},e}(r.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t&&t.hasOwnProperty(e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(73);e.default=function(t,e){var n=o.default(t,e);return n?jQuery(n):null}},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(104),i=n(8),a=n(67),s=n(105),l=n(15),u=n(68),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rootSelector=".page-editor-container .panel.options-panel",e.activePanels=[],e}return o(e,t),e.prototype.initialProperties=function(){this.app.componentRegister.set("Editor/PanelManager",this)},e.prototype.attachEvents=function(t){t.addComponentHandler("click",".action-back-panel-on-click",this.backPanel)},e.prototype.checkIfPanelIsOpen=function(t,e,n){for(var o in this.activePanels){var r=this.activePanels[o];if(n&&r.hasOwnProperty("editorComponent")){if(r.editorComponent.entityId==n&&r.panelKey==t&&a.default(e,r.panelContext))return!0}else if(r.panelKey==t&&a.default(e,r.panelContext))return!0}return!1},e.prototype.getCurrentPanel=function(){return this.activePanels.length?this.activePanels[this.activePanels.length-1]:null},e.prototype.openPanel=function(t,e,n){if("string"!=typeof e&&"number"!=typeof e||(n=e,e={}),!t.length)throw new Error("Parameter panel key is empty");if(e||(e={}),!this.checkIfPanelIsOpen(t,e,n)){if(this.activePanels.length){var o=this.activePanels[this.activePanels.length-1];if(!this.checkCorrectnessOfOptions(o))return;if(this.modalToSaveOptions(o),!this.checkCorrectnessOfOptions(o))return}var r=this.getTemplate(t);if(null==r)throw new Error("Panel template with id '"+t+"' not found");var a=this.builders.panelLayout.createPanelLayout(t),s=this.builders.panel.createPanel(t,e,n);a.panel=s,s.panelLayout=a,s.package=this.package,s.initialProperties();var l=i.default(r(s.getTemplateContext(s.panelContext)));if(l.hide(),this.rootElement.append(l),s.componentElement=a.componentElement=l,this.componentBuilder.implementation(a,this.package),a.assembleControls(a.panelStructure),s.attachEvents(s.eventManager),s.status=u.default.Launched,this.activePanels.length){var p=(o=this.activePanels[this.activePanels.length-1]).componentElement;if(o.status=u.default.Inactive,this.activePanels.length>1){if(o.status=u.default.Destroyed,o.hasOwnProperty("editorComponent")){var c=o.editorComponent;c.hasOwnProperty("panels")&&c.panels.delete(o)}this.activePanels.pop(),this.animationOpen(p,l,function(t,e){t.remove()})}else this.animationOpen(p,l)}else l.show(),l.addClass("status-active");s.status=u.default.Active,this.activePanels.push(s)}},e.prototype.backPanel=function(t){if(t||(t={}),t=l.default({ignoreValidation:!1},t),!(this.activePanels.length<=1)){var e=this.activePanels[this.activePanels.length-1],n=e.componentElement;if((t.ignoreValidation||this.checkCorrectnessOfOptions(e))&&(this.modalToSaveOptions(e),t.ignoreValidation||this.checkCorrectnessOfOptions(e))){var o=this.activePanels[this.activePanels.length-2],r=o.componentElement;if(e.status=u.default.Inactive,o.status=u.default.Active,e.status=u.default.Destroyed,e.hasOwnProperty("editorComponent")){var i=e.editorComponent;i.hasOwnProperty("panels")&&i.panels.delete(e)}this.activePanels.pop(),this.animationBack(n,r,function(t,e){t.remove()})}}},e.prototype.checkCorrectnessOfOptions=function(t){return!("validate"in t)||t.validate()},e.prototype.modalToSaveOptions=function(t){if(!t.isControlsSaved){var e=this.localizedMessages.panel.shouldSaveOptionsOnPanel;e=e.replace(/--panel-title/g,t.panelLayout.panelTitle),confirm(e)?t.saveValuesOfControls():t.resetValuesOfControls()}},e.prototype.scrollToPanelElement=function(t){var e=i.default("#wpadminbar"),n=t.offset().top,o=window.scrollY-n;if(o>200||o<-200){var r=n-20;"fixed"==e.css("position")&&(r-=e.height()),s.default(r,500)}},e.prototype.animationOpen=function(t,e,n){e.addClass("status-launched"),e.show(),t.removeClass("status-active").addClass("status-inactive"),e.addClass("status-active"),setTimeout(function(){e.removeClass("status-launched"),n&&n(t,e)},600),this.scrollToPanelElement(e)},e.prototype.animationBack=function(t,e,n){t.removeClass("status-active").addClass("status-destroyed"),e.removeClass("status-inactive").addClass("status-active"),setTimeout(function(){n&&n(t,e)},600)},e.prototype.getTemplate=function(t){var e=this.app.bodyElement.find(".wcpf-panel-template[data-panel-key="+t+"]");if(!e.length)return null;var n=e.attr("id");return n&&0===n.indexOf("tmpl-")?wp.template(n.slice(5)):null},e}(r.default);e.default=p},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(104),a=n(24),s=n(8),l=n(105),u=n(15),p=n(270),c=n(65),f=n(140),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rootSelector=".page-editor-container .panel.projections-panel",e.activeProjectionsProp=[],e.sortableOptions={},e.sortingIsInitialized=!1,e}return o(e,t),Object.defineProperty(e.prototype,"activeProjections",{get:function(){return this.activeProjectionsProp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"containerElement",{get:function(){return this.rootElement.find(".projections-container")},enumerable:!0,configurable:!0}),e.prototype.initialProperties=function(){this.app.componentRegister.set("Editor/ProjectionManager",this),this.sortableSelectors=[".projections-container",".sort-list"],this.sortableRootSelectors=this.sortableSelectors.map(function(t){return".page-editor-container .projections-panel "+t}).join(","),this.sortableOptions={items:".sort-item",acceptFrom:this.sortableSelectors.join(", "),placeholder:'<div class="projection projection-placeholder"></div>',forcePlaceholderSize:!1}},e.prototype.attachEvents=function(t){t.addSystemHandler(this.editorPackage.projectLoadedEvent,this.onProjectLoaded),t.addWindowHandler("load",this.onWindowLoad)},e.prototype.onWindowLoad=function(t){this.attachSortableEvents(),sortable(this.sortableRootSelectors,this.sortableOptions),this.sortingIsInitialized=!0},e.prototype.reloadSortable=function(){if(this.sortingIsInitialized){sortable(this.sortableRootSelectors,"destroy"),sortable(this.sortableRootSelectors,this.sortableOptions),this.attachSortableEvents();var t=sortable(this.sortableRootSelectors,"serialize");for(var e in t){var n=t[e];for(var o in n.items){var r=n.items[o],i=s.default(r.node).data("entity-id");if(this.register.components.has(i))this.register.components.get(i).entityOrder=o}}}},e.prototype.attachSortableEvents=function(){var t=this,e="wcpf-is-attached-sortable-events";this.app.bodyElement.find(this.sortableRootSelectors).each(function(n,o){var r=s.default(o);r.data(e)||(o.addEventListener("sortupdate",a.default(t.onSortUpdate,t)),r.data(e,!0))})},e.prototype.onSortUpdate=function(t){var e,n,o,i,a={node:t.detail.origin.container,items:t.detail.origin.items},l={node:t.detail.destination.container,items:t.detail.destination.items},p={node:t.detail.item},c=!1;try{for(var d=r([l,a,p]),h=d.next();!h.done;h=d.next()){var y=h.value;y.editorComponent=null,y.projection=null,y.element=s.default(y.node),y.element.hasClass("sort-list")&&(y.element=y.element.parents(".sort-item:first")),y.element.hasClass("projections-container")?y.entityId=this.projectEntity.entityId:y.entityId=y.element.data("entity-id"),this.register.components.has(y.entityId)&&(y.editorComponent=this.register.components.get(y.entityId),y.editorComponent&&y.editorComponent.hasOwnProperty("projection")&&(y.projection=y.editorComponent.projection))}}catch(t){e={error:t}}finally{try{h&&!h.done&&(n=d.return)&&n.call(d)}finally{if(e)throw e.error}}l.element.get(0).isSameNode(a.element.get(0))&&(c=!0);var v={editorComponent:p.editorComponent,nextContainerComponent:l.editorComponent,prevContainerComponent:a.editorComponent};p.editorComponent&&(l.editorComponent?p.editorComponent.entityParentId=l.editorComponent.entityId:p.editorComponent.entityParentId=this.projectEntity.entityId),p.projection&&p.projection.moveProjectionEvent.trigger(u.default({isSameContainer:c},v)),c?l.projection&&l.projection.hasOwnProperty("moveChildProjectionEvent")&&l.projection.moveChildProjectionEvent.trigger(u.default({direction:f.default.same},v)):(l.projection&&l.projection.hasOwnProperty("moveChildProjectionEvent")&&l.projection.moveChildProjectionEvent.trigger(u.default({direction:f.default.inside},v)),a.projection&&a.projection.hasOwnProperty("moveChildProjectionEvent")&&a.projection.moveChildProjectionEvent.trigger(u.default({direction:f.default.outside},v)));try{for(var m=r(c?[l]:[a,l]),_=m.next();!_.done;_=m.next()){var g=_.value;for(var b in g.items){var O;if(O=s.default(g.items[b]).data("entity-id"),this.register.components.has(O))this.register.components.get(O).entityOrder=b}}}catch(t){o={error:t}}finally{try{_&&!_.done&&(i=m.return)&&i.call(m)}finally{if(o)throw o.error}}},e.prototype.onProjectLoaded=function(){var t,e;try{for(var n=r(this.register.components.values()),o=n.next();!o.done;o=n.next()){var i=o.value;this.prototypes.projection.has(i.entityKey)&&i.hasOwnProperty("projection")&&this.addProjection(i)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},e.prototype.hasProjection=function(t){for(var e in this.activeProjections){if(this.activeProjections[e].editorComponent.entityId==t.entityId)return!0}return!1},e.prototype.addProjection=function(t){if(!this.hasProjection(t)){if(!this.prototypes.projection.has(t.entityKey))throw new Error("Projection controller prototype with id '"+t.entityKey+"' not found");if(!t.hasOwnProperty("projection"))throw new Error("Element '#"+t.entityId+" - "+t.entityTitle+"' does not have projection support");var e=this.builders.projection.createProjectionByComponent(t),n=this.getTemplate(e.projectionKey);if(null==n)throw new Error("Projection template with id '"+e.projectionKey+"' not found");this.activeProjectionsProp.push(e),e.initialProperties();var o=s.default(n(e.getTemplateContext()));e.componentElement=o;var r=!0;if(t.entityParentId&&this.register.components.has(t.entityParentId)){for(var i=this.register.components.get(t.entityParentId),a=!1;;){if(i.hasOwnProperty("projection")){a=!0;break}if(!this.register.components.has(i.entityParentId))break;i=this.register.components.get(i.entityParentId)}if(a){!i.projection&&this.prototypes.projection.has(i.entityKey)&&this.addProjection(i);var l=i.projection;l&&"insertChildComponentElement"in l&&(l.insertChildComponentElement(o,t),r=!1)}}if(r&&this.containerElement.append(o),e.initialProjection(),e.attachEvents(e.eventManager),t.entity.childEntities.length)for(var u in t.entity.childEntities){var p=t.entity.childEntities[u],c=this.register.components.get(p.entityId);c&&c.hasOwnProperty("projection")&&this.addProjection(c)}this.reloadSortable(),this.triggerZoneState()}},e.prototype.moveProjection=function(t,e){if(!t.hasOwnProperty("projection"))throw new Error("Element '#"+t.entityId+" - "+t.entityTitle+"' does not have projection support");var n=!0,o=(t.projection,this.containerElement),r=this.containerElement;if(this.register.components.has(t.entity.parentId)){var i=this.register.components.get(t.entity.parentId);i.hasOwnProperty("projection")&&i.projection&&(o=i.projection.componentElement)}if(e.hasOwnProperty("projection")){var a=e.projection;a&&"insertChildComponentElement"in a&&(a.insertChildComponentElement(t.projection.componentElement,t),r=a.componentElement,n=!1)}n&&this.containerElement.append(t.projection.componentElement);var s="> "+this.sortableSelectors.join(", > ");this.onSortUpdate({detail:{origin:{container:o.get(0),items:o.find(s).toArray()},destination:{container:r.get(0),items:r.find(s).toArray()},item:t.projection.componentElement.get(0)}})},e.prototype.removeProjection=function(t,e){var n,o,i,a,s=this;if(!t.hasOwnProperty("projection"))throw new Error("Element '#"+t.entityId+" - "+t.entityTitle+"' does not have projection support");if(confirm(this.localizedMessages.projection.shouldRemoveElement)){var l=t.projection;if(l){if(t.entity.childEntities.length)try{for(var u=r(t.entity.childEntities),f=u.next();!f.done;f=u.next()){var d=f.value;this.register.components.has(d.entityId)&&this.moveProjection(this.register.components.get(d.entityId),this.projectEditorComponent)}}catch(t){n={error:t}}finally{try{f&&!f.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}(void 0===e||e)&&(t.entityStatus=c.default.remove,t.entity.childEntities.length&&p.default(t.entity,function(t){s.register.components.get(t.entityId).status=c.default.remove}));try{for(var h=r(this.panelManager.activePanels),y=h.next();!y.done;y=h.next()){var v=y.value;if(v.hasOwnProperty("editorComponent")&&v.editorComponent.entityId==t.entityId){this.panelManager.backPanel({ignoreValidation:!0});break}}}catch(t){i={error:t}}finally{try{y&&!y.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}l.componentElement.remove(),this.activeProjectionsProp=this.activeProjectionsProp.filter(function(e){return e.editorComponent.entityId!=t.entityId}),t.projection=null,this.reloadSortable(),this.triggerZoneState()}}},e.prototype.scrollToProjection=function(t){if(t.hasOwnProperty("projection")){var e=t.projection.componentElement.offset().top-window.innerHeight/2;l.default(e,500)}},e.prototype.triggerZoneState=function(){var t=this.rootElement.find(".projections-zone");this.activeProjections.length?t.removeClass("empty-state"):t.addClass("empty-state")},e.prototype.getTemplate=function(t){var e=this.app.bodyElement.find(".wcpf-projection-template[data-projection-key="+t+"]");if(!e.length)return null;var n=e.attr("id");return n&&0===n.indexOf("tmpl-")?wp.template(n.slice(5)):null},e}(i.default);e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,n){for(var o in e.childEntities){var r=e.childEntities[o];n(r),r.childEntities.length&&t(r,n)}}},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(272),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getInitialComponents=function(){return[new i.default]},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a};Object.defineProperty(e,"__esModule",{value:!0});var a=n(9),s=n(8),l=n(24),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"validator",{get:function(){return jQuery.validator},enumerable:!0,configurable:!0}),e.prototype.attachEvents=function(t){t.addSystemHandler(this.editorPackage.initEditorEvent,this.initEditor)},e.prototype.initEditor=function(){this.validator.setDefaults({debug:!0,ignore:".control-inactive,*:not([name])",errorPlacement:l.default(this.errorPlacement,this)});var t={filterKeyText:"",filterKeyUniquer:"",requiredIfActiveControl:this.validator.messages.required};if(this.localizedMessages.hasOwnProperty("validatorErrors"))for(var e in this.localizedMessages.validatorErrors){var n=this.localizedMessages.validatorErrors[e];t[e]=this.validator.format(n)}this.validator.addMethod("requiredIfActiveControl",l.default(this.requiredIfActiveControlMethod,this),t.requiredIfActiveControl),this.validator.addMethod("requiredUnit",l.default(this.requiredUnit,this),this.validator.messages.required),this.validator.addMethod("filterKeyText",l.default(this.filterKeyTextMethod,this),t.filterKeyText),this.validator.addMethod("filterKeyUniquer",l.default(this.filterKeyUniquerMethod,this),t.filterKeyUniquer),this.validator.addMethod("filterKeyUniquerDepends",l.default(this.filterKeyUniquerDependsMethod,this),t.filterKeyUniquer)},e.prototype.requiredUnit=function(t,e){var n=s.default(e).parents("form.panel-form");return l.default(this.validator.methods.required,n.data("validator"))(t,e,function(t){return s.default(t).parents(".control-inputs-container:first").find(".text-size").val().length>0})},e.prototype.errorPlacement=function(t,e){var n=e.parents(".control:first").find(".validation-errors-container:first");n.length?n.append(t):t.insertAfter(e.get(0))},e.prototype.requiredIfActiveControlMethod=function(t,e,n){var o=s.default(e),r=o.parents(".control:first"),i=o.parents("form.panel-form");return!(!r.hasClass("control-inactive")&&i.data("validator"))||l.default(this.validator.methods.required,i.data("validator"))(t,e,n)},e.prototype.filterKeyTextMethod=function(t,e){return/^[\w\d0-9\-\_]*$/.test(t)},e.prototype.filterKeyUniquerMethod=function(t,e,n){var o,a,s=this.panelManager.getCurrentPanel(),l=null;s.hasOwnProperty("editorComponent")&&(l=s.editorComponent.entityId);try{for(var u=r(this.register.components),p=u.next();!p.done;p=u.next()){var c=i(p.value,2),f=(c[0],c[1]);if(l!=f.entityId&&"remove"!=f.entityStatus&&("getFilterKeys"in f&&-1!=f.getFilterKeys().indexOf(t)))return!1}}catch(t){o={error:t}}finally{try{p&&!p.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}return!0},e.prototype.filterKeyUniquerDependsMethod=function(t,e,n){var o,i,a=this.panelManager.getCurrentPanel();if(Array.isArray(n))try{for(var s=r(n),l=s.next();!l.done;l=s.next()){var u=l.value,p=a.panelLayout.controls.get(u);if(p&&p.optionValue==t)return!1}}catch(t){o={error:t}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}return!0},e}(a.default);e.default=u},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(274),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getInitialComponents=function(){return[new i.default]},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),i=n(275),a=n(277),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.attachEvents=function(t){t.addSystemHandler(this.editorPackage.initEditorEvent,this.initEditor)},e.prototype.initEditor=function(t){t.panel.set("Project",i.default),t.component.set("Project",a.default)},e}(r.default);e.default=s},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getValidatorOptions=function(){return{rules:{entityTitle:{required:!0,minlength:2},filteringStarts:{required:!0},productsContainerSelector:{requiredIfActiveControl:!0},paginationSelector:{requiredIfActiveControl:!0},resultCountSelector:{requiredIfActiveControl:!0},sortingSelector:{requiredIfActiveControl:!0}}}},e}(n(57).default);e.default=r},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(16),a=n(15),s=function(t){function e(){var e=t.call(this)||this;return e.afterInitValidationEvent=new i.default,e.validateEvent=new i.default,e}return o(e,t),e.prototype.attachEvents=function(e){var n,o;t.prototype.attachEvents.call(this,e);try{for(var i=r(this.panelLayout.controls.values()),a=i.next();!a.done;a=i.next()){var s=a.value;e.addSystemHandler(s.valueChangedEvent,this.validate)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}},e.prototype.onLaunched=function(){var t=this.getValidatorOptions(),e=this.formElement.validate(t);e&&e.hasOwnProperty("settings")&&(e.settings=a.default(e.settings,t)),this.afterInitValidationEvent.trigger({panel:this,formElement:this.formElement,options:t})},e.prototype.onFormSubmit=function(e){t.prototype.onFormSubmit.call(this,e),this.saveValuesOfControls()},e.prototype.validate=function(){var t=this.formElement.valid();return this.validateEvent.trigger({isValid:t,panel:this}),t},e.prototype.saveValuesOfControls=function(){this.validate()&&t.prototype.saveValuesOfControls.call(this)},e.prototype.resetValuesOfControls=function(){var e=this.panelLayout.isControlsSaved;t.prototype.resetValuesOfControls.call(this),e||this.validate()},e.prototype.getValidatorOptions=function(){return{}},e}(n(139).default);e.default=s},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.panels=new Set,e}return o(e,t),e.prototype.attachEvents=function(e){t.prototype.attachEvents.call(this,e),e.addSystemHandler(this.titleChangedEvent,this.onTitleChanged)},e.prototype.onTitleChanged=function(t){this.app.bodyElement.find(".wp-heading-inline .project-name").html(t.title)},e}(n(106).default);e.default=r},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(279),a=n(281),s=n(283),l=n(285),u=n(288),p=n(292),c=n(295),f=n(297),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getInitialSubpackages=function(){return[new i.default,new a.default,new s.default,new l.default,new u.default,new p.default,new c.default,new f.default]},e.prototype.getInitialComponents=function(){return[]},e}(r.default);e.default=d},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(280),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getInitialComponents=function(){return[new i.default]},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),i=n(58),a=n(59),s=n(38),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.attachEvents=function(t){t.addSystemHandler(this.editorPackage.initEditorEvent,this.initEditor)},e.prototype.initEditor=function(t){t.component.set("CheckBoxListField",a.default),t.panel.set("CheckBoxListField",i.default),t.projection.set("CheckBoxListField",s.default)},e}(r.default);e.default=l},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(282),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getInitialComponents=function(){return[new i.default]},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),i=n(58),a=n(59),s=n(38),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.attachEvents=function(t){this.app.packageRegister.get("Editor/Package");t.addSystemHandler(this.editorPackage.initEditorEvent,this.initEditor)},e.prototype.initEditor=function(t){t.component.set("RadioListField",a.default),t.panel.set("RadioListField",i.default),t.projection.set("RadioListField",s.default)},e}(r.default);e.default=l},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(284),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getInitialComponents=function(){return[new i.default]},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),i=n(58),a=n(59),s=n(38),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.attachEvents=function(t){t.addSystemHandler(this.editorPackage.initEditorEvent,this.initEditor)},e.prototype.initEditor=function(t){t.component.set("DropDownListField",a.default),t.panel.set("DropDownListField",i.default),t.projection.set("DropDownListField",s.default)},e}(r.default);e.default=l},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(286),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getInitialComponents=function(){return[new i.default]},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),i=n(287),a=n(107),s=n(38),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.attachEvents=function(t){t.addSystemHandler(this.editorPackage.initEditorEvent,this.initEditor)},e.prototype.initEditor=function(t){t.component.set("ButtonField",a.default),t.panel.set("ButtonField",i.default),t.projection.set("ButtonField",s.default)},e}(r.default);e.default=l},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(57),i=n(15),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getValidatorOptions=function(){return i.default(t.prototype.getValidatorOptions.call(this),{rules:{entityTitle:{required:!0,minlength:2},action:{required:!0}}})},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(289),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getInitialComponents=function(){return[new i.default]},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),i=n(290),a=n(291),s=n(38),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.attachEvents=function(t){t.addSystemHandler(this.editorPackage.initEditorEvent,this.initEditor)},e.prototype.initEditor=function(t){t.component.set("PriceSliderField",a.default),t.panel.set("PriceSliderField",i.default),t.projection.set("PriceSliderField",s.default)},e}(r.default);e.default=l},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(57),i=n(15),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getValidatorOptions=function(){return i.default(t.prototype.getValidatorOptions.call(this),{rules:{entityTitle:{required:!0,minlength:2},optionKey:{requiredIfActiveControl:!0,filterKeyText:!0,filterKeyUniquer:!0,minlength:2},minPriceOptionKey:{requiredIfActiveControl:!0,filterKeyText:!0,filterKeyUniquer:!0,minlength:2},maxPriceOptionKey:{requiredIfActiveControl:!0,filterKeyText:!0,filterKeyUniquer:!0,filterKeyUniquerDepends:["minPriceOptionKey"],minlength:2}}})},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getFilterKeys=function(){var t=[];return"dash"==this.options.get("optionKeyFormat")?t.push(this.options.get("optionKey")):"two"==this.options.get("optionKeyFormat")&&(t.push(this.options.get("minPriceOptionKey")),t.push(this.options.get("maxPriceOptionKey"))),t},e}(n(107).default);e.default=r},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(293),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getInitialComponents=function(){return[new i.default]},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),i=n(294),a=n(59),s=n(38),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.attachEvents=function(t){t.addSystemHandler(this.editorPackage.initEditorEvent,this.initEditor)},e.prototype.initEditor=function(t){t.component.set("BoxListField",a.default),t.panel.set("BoxListField",i.default),t.projection.set("BoxListField",s.default)},e}(r.default);e.default=l},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(58),i=n(15),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getValidatorOptions=function(){var e=t.prototype.getValidatorOptions.call(this);return e.rules=i.default(e.rules,{boxSize:{required:!0,number:!0,min:1},boxSizeUnit:{requiredUnit:!0}}),e},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(296),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getInitialComponents=function(){return[new i.default]},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),i=n(58),a=n(59),s=n(38),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.attachEvents=function(t){t.addSystemHandler(this.editorPackage.initEditorEvent,this.initEditor)},e.prototype.initEditor=function(t){t.component.set("TextListField",a.default),t.panel.set("TextListField",i.default),t.projection.set("TextListField",s.default)},e}(r.default);e.default=l},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(298),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getInitialComponents=function(){return[new i.default]},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),i=n(299),a=n(59),s=n(38),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.attachEvents=function(t){t.addSystemHandler(this.editorPackage.initEditorEvent,this.initEditor)},e.prototype.initEditor=function(t){t.component.set("ColorListField",a.default),t.panel.set("ColorListField",i.default),t.projection.set("ColorListField",s.default)},e}(r.default);e.default=l},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(58),i=n(15),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getValidatorOptions=function(){var e=t.prototype.getValidatorOptions.call(this);return e.rules=i.default(e.rules,{colors:{repeaterItem:{type:{required:!0},term:{required:!0},markerStyle:{required:!0},color:{requiredIfActiveControl:!0}}}}),e},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(301),a=n(306),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getInitialSubpackages=function(){return[new i.default,new a.default]},e.prototype.getInitialComponents=function(){return[]},e}(r.default);e.default=s},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(302),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getInitialComponents=function(){return[new i.default]},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),i=n(303),a=n(142),s=n(304),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.attachEvents=function(t){t.addSystemHandler(this.editorPackage.initEditorEvent,this.initEditor)},e.prototype.initEditor=function(t){t.component.set("ColumnsLayout",a.default),t.panel.set("ColumnsLayoutItem",i.default),t.projection.set("ColumnsLayout",s.default)},e}(r.default);e.default=l},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(57),i=n(42),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.createOptionsRepository=function(){var t=this.editorComponent.entity.options.columns[this.panelContext.columnIndex].options;return new i.default(t)},e.prototype.getValidatorOptions=function(){return{rules:{width:{required:!0,number:!0,min:1},widthUnit:{requiredUnit:!0}}}},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(143),a=n(55),s=n(8),l=n(102),u=n(140),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"columns",{get:function(){return this.entityOptions.get("columns")},set:function(t){this.entityOptions.set("columns",t)},enumerable:!0,configurable:!0}),e.prototype.initialProjection=function(){t.prototype.initialProjection.call(this),Array.isArray(this.columns)||(this.columns=l.default(this.columns));for(var e=0;e<this.columns.length;e++)Array.isArray(this.columns[e].entities)||(this.columns[e].entities=l.default(this.columns[e].entities)),Array.isArray(this.columns[e].options)&&(this.columns[e].options=Object.assign({},this.columns[e].options)),this.createColumnElement(e)},e.prototype.attachEvents=function(e){t.prototype.attachEvents.call(this,e),e.addSystemHandler(this.moveChildProjectionEvent,this.onMoveChildProjection),this.addElementHandler("click",".actions-wrapper.entity-id-"+this.editorComponent.entityId+" .add-column-action",this.onAddColumnClick),this.addElementHandler("click",".column-item .actions.entity-id-"+this.editorComponent.entityId+" .remove-action",this.onRemoveColumnClick),this.addElementHandler("click",".column-item .actions.entity-id-"+this.editorComponent.entityId+" .edit-action",this.onEditColumnClick)},e.prototype.onEditColumnClick=function(t){var e=a.default(t).parents(".column-item:first").data("column-index");this.panelManager.openPanel("ColumnsLayoutItem",{columnIndex:e},this.editorComponent.entityId)},e.prototype.onRemoveColumnClick=function(t){var e=a.default(t).parents(".column-item:first").data("column-index");this.removeColumn(e)},e.prototype.onAddColumnClick=function(t){var e=this.createEmptyColumn();this.panelManager.openPanel("ColumnsLayoutItem",{columnIndex:e},this.editorComponent.entityId)},e.prototype.onMoveChildProjection=function(t){t.editorComponent.hasOwnProperty("projection")&&(t.direction==u.default.same?(this.outsideChild(t.editorComponent),this.insideChild(t.editorComponent)):t.direction==u.default.inside?this.insideChild(t.editorComponent):t.direction==u.default.outside&&this.outsideChild(t.editorComponent))},e.prototype.insideChild=function(t){var e=t.projection.componentElement,n=".column-item.entity-id-"+this.editorComponent.entityId,o=e.parents(n).data("column-index"),r=this.columns;r[o].entities.push(t.entityId),this.columns=r},e.prototype.outsideChild=function(t){var e,n,o=0,i=this.columns;for(var a in i){var s=i[a];try{for(var l=r(s.entities),u=l.next();!u.done;u=l.next()){if(u.value==t.entityId){o=a;break}}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}}i[o].entities=i[o].entities.filter(function(e){return e!=t.entityId}),this.columns=i},e.prototype.insertChildComponentElement=function(t,e){var n,o,i=this.columns,a=0;for(var s in i){var l=i[s];try{for(var u=r(l.entities),p=u.next();!p.done;p=u.next()){if(p.value==e.entityId){a=s;break}}}catch(t){n={error:t}}finally{try{p&&!p.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}}this.getColumnContentElement(a).append(t)},e.prototype.createEmptyColumn=function(){var t=this.columns;t.push({entities:[],options:{}}),this.columns=t;var e=t.length-1;return this.createColumnElement(e),e},e.prototype.createColumnElement=function(t){var e=s.default('\n            <div class="column-item column-item-'+t+" entity-id-"+this.editorComponent.entityId+'"\n                data-column-index="'+t+'">\n                <div class="column-header">\n                    <div class="column-title">\n                        <span class="text">'+this.localizedMessages.columnsLayout.column+" "+t+'</span>\n                    </div>\n                    <div class="actions entity-id-'+this.editorComponent.entityId+'">\n                        <div class="button-link edit-action">\n                            <span class="text">'+this.localizedMessages.columnsLayout.edit+'</span>\n                        </div>\n                        <div class="button-link remove-action">\n                            <span class="text">'+this.localizedMessages.columnsLayout.remove+'</span>\n                        </div>\n                    </div>\n                </div>\n                <div class="sort-list column-content entity-id-'+this.editorComponent.entityId+'"></div>\n            </div>\n        ');return this.componentElement.find(".body-container:first").append(e),this.projectionManager.reloadSortable(),e},e.prototype.removeColumn=function(t){var e,n;if(0!=t){var o=this.columns;if(o.length>t&&0<=t){var i=o[t].entities;o.splice(t,1),this.columns=o;try{for(var a=r(i),s=a.next();!s.done;s=a.next()){var l=s.value;this.register.components.has(l)&&this.projectionManager.moveProjection(this.register.components.get(l),this.editorComponent)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}this.removeColumnElement(t);for(var u=t+1;u<=o.length;u++){var p=u-1,c=this.getColumnElement(u);c.removeClass("column-item-"+u).addClass("column-item-"+p).attr("data-column-index",p),c.find("> .column-header .column-title .text").html(this.localizedMessages.columnsLayout.column+" "+p)}}}},e.prototype.removeColumnElement=function(t){this.getColumnElement(t).remove(),this.projectionManager.reloadSortable()},e.prototype.getColumnElement=function(t){return this.componentElement.find(".column-item.column-item-"+t+".entity-id-"+this.editorComponent.entityId)},e.prototype.getColumnContentElement=function(t){return this.componentElement.find(".column-item.column-item-"+t+" .column-content.entity-id-"+this.editorComponent.entityId)},e}(i.default);e.default=p},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(16),i=function(t){function e(){var e=t.call(this)||this;return e.moveChildProjectionEvent=new r.default,e}return o(e,t),e}(n(141).default);e.default=i},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(307),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getInitialComponents=function(){return[new i.default]},e}(r.default);e.default=a},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),i=n(142),a=n(308),s=n(309),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.attachEvents=function(t){t.addSystemHandler(this.editorPackage.initEditorEvent,this.initEditor)},e.prototype.initEditor=function(t){t.component.set("SimpleBoxLayout",i.default),t.panel.set("SimpleBoxLayout",s.default),t.projection.set("SimpleBoxLayout",a.default)},e}(r.default);e.default=l},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"titleElement",{get:function(){return this.componentElement.find(".title-container.entity-id-"+this.editorComponent.entityId+" .entity-title")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"containerElement",{get:function(){return this.componentElement.find(".sort-list.entity-id-"+this.editorComponent.entityId)},enumerable:!0,configurable:!0}),e.prototype.attachEvents=function(e){t.prototype.attachEvents.call(this,e),e.addSystemHandler(this.editorComponent.titleChangedEvent,this.onTitleChanged)},e.prototype.onTitleChanged=function(t){this.titleElement.html(t.title)},e.prototype.insertChildComponentElement=function(t,e){this.containerElement.append(t)},e}(n(143).default);e.default=r},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getValidatorOptions=function(){return{rules:{entityTitle:{required:!0,minlength:2},defaultToggleState:{requiredIfActiveControl:!0}}}},e}(n(57).default);e.default=r}]);